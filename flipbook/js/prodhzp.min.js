"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls={isEditMode:!1,config:null,init:function(e){this.config=e,(null==e.disableControls||null!=e.disableControls&&!e.disableControls.zoom)&&hzflip.controls.zoom.bindings(),hzflip.controls.fullscreen.bindings(),hzflip.controls.navigation.bindings(e),hzflip.controls.slider.bindings(e,"SWIPER"===e.viewer),hzflip.controls.sound.bindings(e),hzflip.controls.share.bindings(e),hzflip.controls.search.bindings(e),hzflip.controls.simpleBindings(e)},destroy:function(){hzflip.controls.fullscreen.destroy(),hzflip.controls.sound.destroy(),hzflip.controls.share.destroy(),hzflip.controls.search.destroy(),hzflip.controls.simpleBindingsDestroy()},setEditMode:function(e){hzflip.controls.zoom.setEditMode(e),hzflip.controls.fullscreen.setEditMode(e),this.isEditMode=e},initViewerControls:function(e){hzflip.controls.slider.bindings(e,"SWIPER"===e.viewer),setTimeout(()=>{hzflip.controls.toolbar.resize()})},turned:function(e){hzflip.controls.zoom.turned(e),hzflip.controls.slider.turned(e),hzflip.controls.navigation.turned(e),hzflip.controls.share.turned(e),hzflip.controls.search.turned(e),$(".logo-backs2").parent().is("a")&&null!=e&&(1==e||e==heyzine.config.num_pages&&heyzine.config.num_pages%2==0?$(".logo-backs2").css("z-index",1):$(".logo-backs2").css("z-index",0))},turning:function(e){hzflip.controls.slider.turning(e),hzflip.controls.navigation.turning(e),hzflip.controls.share.turning(e),hzflip.controls.sound.turning(e),hzflip.controls.search.turning(e),$(".logo-backs2").parent().is("a")&&null!=e&&(1==e||e==heyzine.config.num_pages&&heyzine.config.num_pages%2==0?$(".logo-backs2").css("z-index",1):$(".logo-backs2").css("z-index",0))},resizeViewport:function(e){null!=e&&hzflip.controls.navigation.resizeViewport(e),hzflip.controls.toolbar.resizeViewport(),hzflip.controls.search.resizeViewport()},goToPage:function(e,t){heyzine.goToPage(e,t)},setZoom:function(e,t,i){hzflip.controls.zoom.setZoom(e,t,i)},getZoomScale:function(){return hzflip.controls.zoom.getScale()},simpleBindings:function(e){$("#btnPrint").on("click",()=>{$(".printIframe").remove();let e=document.createElement("iframe");e.className="printIframe",e.style.display="none",document.body.appendChild(e),e.onload=function(){setTimeout((function(){e.focus(),e.contentWindow.print(),heyzine.stats.trackControls("print")}),1)};let t=heyzine.url.replace("https://","").replace("http://","");return t=t.substr(t.indexOf("/")),e.src=t,!1}),$(".hz-icon.down-pdf").on("click",()=>{heyzine.stats.trackControls("down")})},simpleBindingsDestroy:function(){$("#btnPrint").off("click"),$(".hz-icon.down-pdf").off("click")},toolbar:{},showPanel:function(e,t){let i=heyzine.controls.toolbar.getStyle();if("right"==i.alignX?$(t).css({"margin-right":"0",width:"calc(100% - 40px)"}):$(t).css({"margin-right":"10px",width:"calc(100% - 40px)"}),"horizontal"==i.direction){let n;n=1==i.float?$("#pnlControls").offset().left+$("#pnlControls").width()/2-$(t).width()/2:$(e).offset().left-$(t).width()/2;let o=$("#pnlControls").height()+20;if(n<$("#canvas").offset().left)n=1==i.float?$("#pnlControls").offset().left-$("#canvas").offset().left:20;else if(n+$(t).width()>$("#canvas").offset().left+$("#canvas").width()){const e=parseInt($("#canvas").get(0).style.paddingRight.replace("px",""));n=1==i.float?$("#pnlControls").offset().left+$("#pnlControls").outerWidth()-$(t).outerWidth()-$("#canvas").offset().left:$("#canvas").outerWidth()-$(t).outerWidth()-e}else n-=$("#canvas").offset().left;if(n<0&&(n=20),"top"==i.alignY)$(t).css({left:n+"px",right:"auto",top:o+parseInt($("#pnlControls").get(0).style.top.replace("px",""))+"px",bottom:"auto",transform:"none"});else{let e=0;1==i.float&&(e=0==heyzine.design.data.show_slider?0:heyzine.controls.toolbar.def.slider.pad),$(t).css({left:n+"px",right:"auto",top:"auto",bottom:e+o+parseInt($("#pnlControls").get(0).style.bottom.replace("px",""))+"px",transform:"none"})}}else{let n=$(e).offset().top+$(e).height()/2-$(t).outerHeight()/2,o=$("#pnlControls").width()+20;n<$("#canvas").offset().top?n=20:n+$(t).outerHeight()>$("#canvas").offset().top+$("#canvas").height()?n=$("#canvas").height()-$(t).outerHeight()-20:n-=$("#canvas").offset().top,n<0&&(n=20),"left"==i.alignX?$(t).css({left:o+parseInt($("#pnlControls").get(0).style.left.replace("px",""))+"px",right:"auto",top:n+"px",bottom:"auto",transform:"none"}):$(t).css({left:"auto",right:o+parseInt($("#pnlControls").get(0).style.right.replace("px",""))+"px",top:n+"px",bottom:"auto",transform:"none"})}}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls.fullscreen={isEditMode:!1,bindings:function(){$(".fullscreen-button").on("click",(function(){return scaler.isInIframe()&&!hzflip.controls.fullscreen.isSupported()?hzflip.controls.fullscreen.toggleMessage():hzflip.controls.fullscreen.toggle(),heyzine.firstInteraction(),!1})),scaler.isInIframe()||this.isSupported()||$(".fullscreen-button").hide()},destroy:function(){$(".fullscreen-button").off("click")},isSupported:function(){var e=document,t=!0;$("#canvas").parent().is("body")||(e=$("#canvas").parent().get(0),t=!1);var i=e;return t&&(i=e.documentElement),!!i.requestFullScreen||(!!i.mozRequestFullScreen||!!i.webkitRequestFullScreen)},toggleMessage:function(){$(".fullscreen-button").hasClass("hz-icn-fullscreen-on")?($(".fullscreen-button").removeClass("hz-icn-fullscreen-on").addClass("hz-icn-fullscreen-off"),window.parent.postMessage({action:"heyzineFullscreen",value:!0,target:document.location.href},"*")):($(".fullscreen-button").removeClass("hz-icn-fullscreen-off").addClass("hz-icn-fullscreen-on"),window.parent.postMessage({action:"heyzineFullscreen",value:!1,target:document.location.href},"*"))},toggle:function(){if(!this.isEditMode){var e=document,t=!0;if($("#canvas").parent().is("body")||(e=$("#canvas").parent().get(0),t=!1),e.fullScreenElement&&null!==e.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen){var i=e;t&&(i=e.documentElement),i.requestFullScreen?i.requestFullScreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),$(".fullscreen-button").removeClass("hz-icn-fullscreen-on").addClass("hz-icn-fullscreen-off"),heyzine.stats.trackControls("fullscreen")}else document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),$(".fullscreen-button").removeClass("hz-icn-fullscreen-off").addClass("hz-icn-fullscreen-on")}},setEditMode:function(e){this.isEditMode=e}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls.navigation={inited:!1,numPages:0,hashNavigation:!0,firstTurned:!1,tmrPageDepthLabel:null,pageDepthPage:null,bindings:function(e){var t=hzflip.controls.navigation;t.numPages=e.num_pages,t.hashNavigation=null==e.hashNavigation||!1!==e.hashNavigation,t.inited||(t.inited=!0,null!=heyzine.design.data.embed_mode&&1==heyzine.design.data.embed_mode||$(document).keydown((function(e){if(!$(e.target).is("input")&&!$(e.target).is("textarea")){switch(e.keyCode){case 37:1==heyzine.design.data.rtl?hzflip.controls.goToPage("next","keyboard"):hzflip.controls.goToPage("previous","keyboard"),e.preventDefault();break;case 39:1==heyzine.design.data.rtl?hzflip.controls.goToPage("previous","keyboard"):hzflip.controls.goToPage("next","keyboard"),e.preventDefault();break;case 27:hzflip.controls.setZoom("zoomOut"),e.preventDefault()}}})),$(document).on("click",".btnNext",(function(e){1==heyzine.design.data.rtl?hzflip.controls.goToPage("previous","button"):hzflip.controls.goToPage("next","button")})).on("mouseenter",".btnNext",(function(){$(this).hasClass("next-button")&&$(this).addClass("next-button-hover")})).on("mouseleave",".btnNext",(function(){$(this).hasClass("next-button")&&$(this).removeClass("next-button-hover")})),$(document).on("click",".btnPrevious",(function(e){1==heyzine.design.data.rtl?hzflip.controls.goToPage("next","button"):hzflip.controls.goToPage("previous","button")})).on("mouseenter",".btnPrevious",(function(){$(this).hasClass("previous-button")&&$(this).addClass("previous-button-hover")})).on("mouseleave",".btnPrevious",(function(){$(this).hasClass("previous-button")&&$(this).removeClass("previous-button-hover")})),$(document).on("click","#btnNavPrev",(function(){return 1==heyzine.design.data.rtl?hzflip.controls.goToPage("next","button-nav"):hzflip.controls.goToPage("previous","button-nav"),heyzine.firstInteraction(),!1})),$(document).on("click","#btnNavNext",(function(){return 1==heyzine.design.data.rtl?hzflip.controls.goToPage("previous","button-nav"):hzflip.controls.goToPage("next","button-nav"),heyzine.firstInteraction(),!1})),$(document).on("click","#btnNavStart",(function(){let e=""==$.trim(heyzine.design.data.start_page)?1:heyzine.design.data.start_page;return 1==heyzine.design.data.rtl&&(e=""==$.trim(heyzine.design.data.end_page)?t.numPages:heyzine.design.data.end_page),hzflip.controls.goToPage(e,"button-nav"),heyzine.firstInteraction(),!1})),$(document).on("click","#btnNavEnd",(function(){let e=""==$.trim(heyzine.design.data.end_page)?t.numPages:heyzine.design.data.end_page;return 1==heyzine.design.data.rtl&&(e=""==$.trim(heyzine.design.data.start_page)?1:heyzine.design.data.start_page),hzflip.controls.goToPage(e,"button-nav"),heyzine.firstInteraction(),!1})),$(document).on("mouseenter",".page-depth",(function(e){1==heyzine.getZoomScale()&&(t.tmrPageDepthLabel=setTimeout(()=>{$(".page-depth-label").fadeIn("fast")},50))})),$(document).on("mouseleave",".page-depth",(function(e){$(".page-depth-label").hide(),null!=t.tmrPageDepthLabel&&(t.pageDepthPage=null,clearTimeout(t.tmrPageDepthLabel))})),$(document).on("mousemove",".page-depth",(function(e){if(1!=heyzine.getZoomScale())return $(".page-depth-label").hide(),void(t.pageDepthPage=null);$(".page-depth-label").css({top:e.clientY-40-$("#canvas").offset().top,left:e.clientX-$(this).width()/4-$("#canvas").offset().left});const i=heyzine.getVisiblePages();let n=0;if(1==heyzine.design.data.rtl)if($(this).hasClass("page-depth-right")){const t=Math.abs($(this).css("right").replace("px","")),o=Math.abs($(this).offset().left+($(this).width()-t)-e.pageX),s=i[0]-1,a=1,l=t;n=Math.round(o/(l/(a-s)))+s}else{const o=Math.abs($(this).position().left),s=$(this).offset().left+o-e.pageX,a=(i.length>1?i[1]:i[0])+1,l=t.numPages,r=o;n=Math.round(s/(r/(l-a)))+a}else if($(this).hasClass("page-depth-left")){const t=e.pageX-$(this).offset().left,o=i[0]-1<1?1:i[0]-1,s=Math.abs($(this).position().left);n=Math.round(t/(s/o))+1}else{const o=Math.abs($(this).css("right").replace("px","")),s=e.pageX-$(this).offset().left-$(this).width()+o,a=i.length>1?i[1]:i[0],l=t.numPages,r=a+1>t.numPages?t.numPages:a+1,h=o;n=Math.round(s/(h/(l-r)))+r}t.pageDepthPage=n,$(".page-depth-label").html(n)})),$(document).on("click",".page-depth",(function(e){null!=t.pageDepthPage&&hzflip.controls.goToPage(t.pageDepthPage,"button-nav")})),t.hashNavigation&&"undefined"!=typeof Hash&&Hash.on("^page/([0-9]*)$",{yep:function(e,t){var i=t[1];void 0!==i&&hzflip.controls.goToPage(parseInt(i),"url")},nop:function(e){hzflip.controls.goToPage(1,"url")}}))},turned:e=>{var t=hzflip.controls.navigation;t.showHide(e),t.hashNavigation&&"undefined"!=typeof Hash&&t.firstTurned&&null==heyzine.browserNavButtons?Hash.go("page/"+e).update():t.firstTurned=!0},turning:e=>{var t=hzflip.controls.navigation;null!=e&&t.showHide(e)},resizeViewport:e=>{$(".next-button").css({height:e.height,backgroundPosition:"-38px "+(e.height/2-16)+"px"}),$(".previous-button").css({height:e.height,backgroundPosition:"-4px "+(e.height/2-16)+"px"})},showHide:e=>{3!=heyzine.design.data.arrows&&(1==heyzine.design.data.rtl?(1==e?$(".next-button").hide():$(".next-button").show(),heyzine.isLastPage(e)?$(".previous-button").hide():$(".previous-button").show()):(1==e?$(".previous-button").hide():$(".previous-button").show(),heyzine.isLastPage(e)?$(".next-button").hide():$(".next-button").show()))},startAutoPlay:function(e){null==e||e<1||setInterval(()=>{heyzine.isLastPage()?hzflip.controls.goToPage(1):hzflip.controls.goToPage("next","button-nav")},1e3*e)}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls.slider={numPages:0,config:null,drag:!1,positionSliderThumb:function(e,t){var i=$(e).parent().find(t).outerWidth()/2,n=$(e).width(),o=n/2,s=(e.value-1)/(e.max-e.min);(isNaN(s)||s<0)&&(s=0);var a=s*n,l=a-i-42.5*((a-o)/o);1==heyzine.design.data.rtl?$(e).parent().find(t).css("right",l+"px"):$(e).parent().find(t).css("left",l+"px")},isSinglePage:function(){return"SWIPER"==heyzine.config.viewer||2==heyzine.design.data.show_double},bindings:function(e){if($(".page-bar").length<=0||0==heyzine.design.data.show_slider)return;1==heyzine.design.data.rtl?$(".page-bar input[type=range]").css("direction","rtl"):$(".page-bar input[type=range]").css("direction","ltr");const t=null==heyzine.design.data.show_slider||1==heyzine.design.data.show_slider||3==heyzine.design.data.show_slider,i=2==heyzine.design.data.show_slider||3==heyzine.design.data.show_slider;var n=hzflip.controls.slider;this.config=e,n.numPages=e.num_pages,$(".page-bar input[type=range]").attr("min",1),$(".page-bar input[type=range]").attr("max",n.isSinglePage()?n.numPages:n.numPages%2==0?Math.floor((n.numPages-2)/2)+2:Math.floor(n.numPages/2)+1),i?$(".page-bar .page-bar-value").addClass("page-bar-num-enabled"):$(".page-bar .page-bar-value").removeClass("page-bar-num-enabled"),$(".page-bar input[type=range]").on("input mousedown",(function(){if(n.drag=!0,t){let e=100;!0===heyzine.config.toc?e=1:$(".page-bar-value").hide(),n.positionSliderThumb(this,"span.page-bar-value"),n.thumbnails($(this).parent().find("span.page-bar-value"),$(this).val(),e).then(()=>{n.drag&&(n.positionSliderThumb(this,"span.page-bar-value"),$(".page-bar-value").fadeIn("fast"))}).catch(()=>{})}if(i){$("span.page-bar-num").show();const e=n.rangeToPage($(this).val());null==e[1]?$("span.page-bar-num").html(e[0]):$("span.page-bar-num").html(e[0]+" - "+e[1]),n.positionSliderThumb(this,"span.page-bar-num")}})),$(".page-bar input[type=range]").on("mouseup touchend",(function(){n.drag=!1,setTimeout(()=>{t&&$(".page-bar-value").fadeOut("fast"),i&&$("span.page-bar-num").fadeOut("fast")},500);let e=n.isSinglePage()?$(this).val():1==$(this).val()?1:2*$(this).val()-2;hzflip.controls.goToPage(e,"slider")}))},turned:function(e){$(".page-bar").length<=0||null==heyzine.design.data||0==heyzine.design.data.show_slider||setTimeout(()=>{let t=1;t=this.isSinglePage()?e:1==e?1:Math.floor(e/2)+1,$(".page-bar input[type=range]").val(t)},200)},turning:e=>{},rangeToPage:function(e){var t,i=this.numPages;return i%2==0&&(t=(i-2)/2+2),i%2!=0&&(t=(i-1)/2+1),this.isSinglePage()||1==e?[parseInt(e),null]:e==t?i%2!=0?[2*(e-1),2*(e-1)+1]:[2*(e-1),null]:[2*(e-1),2*(e-1)+1]},thumbnails:function(e,t,i){if(!($(".page-bar").length<=0||null==heyzine.design.data||0==heyzine.design.data.show_slider))return new Promise((n,o)=>{"undefined"!=typeof timerThumbs&&clearTimeout(timerThumbs),timerThumbs=setTimeout(()=>{const i=this.rangeToPage(t);heyzine.loadPageThumbnails(i[0],i[1],e).then(()=>{n()})},i)})}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls.zoom={pos:{},isEditMode:!1,initial:{},timerDelay:!1,isZoomIn:!1,isZoomProgress:!1,isZoomEnabled:!0,preventDoubleTap:!1,delayTimer:null,hammer:null,xMove:null,yMove:null,state:{inc:1.15,scale:1,xLast:0,yLast:0,xImage:0,yImage:0,pinchScale:0},bindings:function(){var e=hzflip.controls.zoom;null!=heyzine.design.data.embed_mode&&1==heyzine.design.data.embed_mode||0==heyzine.design.data.show_zoom&&0==heyzine.design.data.click_zoom?this.isZoomDisabled=!0:this.isZoomDisabled=!1,this.initial.transform=$("#magazineViewport").css("transform"),this.initial.origin=$("#magazineViewport").css("transform-origin"),this.xMove=null,this.yMove=null,this.hammer=new Hammer.Manager($("#canvas").get(0),{recognizers:[[Hammer.Pinch,{enable:!0}]]}),this.hammer.options.domEvents=!0;var t=new Hammer.Tap({event:"singletap"}),i=new Hammer.Tap({event:"doubletap",taps:2});this.hammer.add([i,t]),i.recognizeWith(t),$(window).on("mouseout",()=>{this.moveEnd()}),$("#canvas").on("mouseout",()=>{this.moveEnd()}),$("#canvas").on("touchstart",e=>{this.moveStart(e.touches[0].pageX,e.touches[0].pageY)}),$("#canvas").on("touchend",()=>{this.moveEnd()}),$("#canvas").on("touchmove",e=>{$(e.target).closest(".layer-action-render").hasClass("layer-disable-page-drag")||this.moveProgress(e.touches[0].pageX,e.touches[0].pageY)}),$("#canvas").on("mousedown",e=>{this.moveStart(e.pageX,e.pageY)}),$("#canvas").on("mouseup",()=>{this.moveEnd()}),$("#canvas").on("mousemove",e=>{$(e.target).closest(".layer-action-render").hasClass("layer-disable-page-drag")||this.moveProgress(e.pageX,e.pageY)}),this.hammer.on("pinch",(function(t){if(!e.isEditMode&&!e.isZoomDisabled){window.disableTurnEvents=!0,e.pinching=!0;let i=t.scale>0?3*(t.scale-1):3*(1-t.scale);e.zoomSet({size:e.state.pinchScale+i,animate:!1},{x:t.center.x-$("#canvas").offset().left,y:t.center.y-$("#canvas").offset().top,noRender:!0}),t.srcEvent.stopPropagation(),t.srcEvent.stopImmediatePropagation(),t.srcEvent.preventDefault()}return!1})),this.hammer.on("pinchend",(function(t){let i=t.scale>0?3*(t.scale-1):3*(1-t.scale);e.state.pinchScale+=i,e.pinching=!1,null!=e.tmrRenderPinch&&clearTimeout(e.tmrRenderPinch),e.tmrRenderPinch=setTimeout(()=>{e.pinching||e.renderPages()},600)})),$("#canvas").mousewheel((function(t,i){let n=heyzine.design.data.click_zoom,o=t.originalEvent.ctrlKey;return e.isEditMode||e.isZoomDisabled||0==n||((1==n&&!o||2==n&&o)&&e.zoomSet({dir:i,animate:!1},{x:t.pageX-$(this).offset().left,y:t.pageY-$(this).offset().top}),(2==n&&!o||1==n&&o)&&(e.isZoomIn?(e.moveStart(t.pageX,t.pageY),i>0?e.moveProgress(t.pageX,t.pageY+30):e.moveProgress(t.pageX,t.pageY-30),e.moveEnd()):(null==e.delayTimer||(new Date).getTime()-e.delayTimer>300)&&(i>0?hzflip.controls.goToPage("previous","button-nav"):hzflip.controls.goToPage("next","button-nav"),e.delayTimer=(new Date).getTime()))),!(!e.isZoomDisabled&&0!=heyzine.design.data.click_zoom)})),$(".zoom-icon").on("click",(function(){return e.isEditMode||e.isZoomDisabled||(e.isZoomIn?e.zoomReset():e.zoomCenter()),heyzine.firstInteraction(),!1})),this.hammer.on("singletap",(function(t){"pnlControls"!=$(t.target).attr("id")&&"pnlControls"!=$(t.target).parent().attr("id")&&"true"!=$(t.target).attr("data-disable-zoom")?e.preventDoubleTap=!1:e.preventDoubleTap=!0})),this.hammer.on("doubletap",(function(t){e.preventDoubleTap||"pnlControls"==$(t.target).attr("id")||"pnlControls"==$(t.target).parent().attr("id")||"true"==$(t.target).attr("data-disable-zoom")||0!=heyzine.design.data.click_zoom&&(e.isEditMode||e.isZoomDisabled||(e.isZoomIn?e.zoomReset():e.zoomCenter()),t.srcEvent.stopPropagation(),t.srcEvent.stopImmediatePropagation())})),$(".btnZoomMore").on("dblclick",(function(e){return e.stopPropagation(),e.preventDefault(),!1})),$(".btnZoomLess").on("dblclick",(function(e){return e.stopPropagation(),e.preventDefault(),!1})),$(".btnZoomMore").on("click",(function(t){return e.zoomCenter(1),!1})),$(".btnZoomLess").on("click",(function(t){return e.zoomCenter(-1),!1}))},moveStart:function(e,t){if(!this.isEditMode&&!this.isZoomDisabled&&1!=this.state.scale){var i=hzflip.controls.zoom.pos;i.dragging=!0,this.xMove=e,this.yMove=t,i.xInit=i.xNew,i.yInit=i.yNew,$(".magazine-viewport").addClass("grabbing")}},moveEnd:function(){if(this.isEditMode||this.isZoomDisabled)return!0;hzflip.controls.zoom.pos.dragging=!1,$(".magazine-viewport").removeClass("grabbing")},moveProgress:function(e,t){if(this.isEditMode||this.isZoomDisabled||1==this.state.scale)return!0;var i=hzflip.controls.zoom.pos;if(i.dragging){var n=i.xNew,o=i.yNew,s=this.state.xLast,a=this.state.yLast,l=this.xMove-e,r=this.yMove-t;this.xMove=e,this.yMove=t,i.xNew-=l/this.state.scale,i.yNew-=r/this.state.scale,this.state.xLast-=l,this.state.yLast-=r,$("#magazineViewport").css("transform","scale("+i.scale+")translate("+i.xNew+"px, "+i.yNew+"px)");let h=null,d=null,c=null,p=null;const g=heyzine.getVisiblePages();for(let e=0;e<g.length;e++)(null==h||h>$('#magazineViewport [page="'+g[e]+'"]').offset().left)&&(h=$('#magazineViewport [page="'+g[e]+'"]').offset().left),(null==d||d>$('#magazineViewport [page="'+g[e]+'"]').offset().top)&&(d=$('#magazineViewport [page="'+g[e]+'"]').offset().top),(null==p||p<$('#magazineViewport [page="'+g[e]+'"]').offset().top+$('#magazineViewport [page="'+g[e]+'"]').height()*this.state.scale)&&(p=$('#magazineViewport [page="'+g[e]+'"]').offset().top+$('#magazineViewport [page="'+g[e]+'"]').height()*this.state.scale),(null==c||c<$('#magazineViewport [page="'+g[e]+'"]').offset().left+$('#magazineViewport [page="'+g[e]+'"]').width()*this.state.scale)&&(c=$('#magazineViewport [page="'+g[e]+'"]').offset().left+$('#magazineViewport [page="'+g[e]+'"]').width()*this.state.scale);h-=$("#canvas").offset().left,c-=$("#canvas").offset().left,d-=$("#canvas").offset().top,p-=$("#canvas").offset().top,(h>0&&i.xNew>n||c<$("#canvas").width()&&i.xNew<n)&&(i.xNew=n,this.state.xLast=s,$("#magazineViewport").css("transform","scale("+i.scale+")translate("+i.xNew+"px, "+i.yNew+"px)")),(d>0&&i.yNew>o||p<$("#canvas").height()&&i.yNew<o)&&(i.yNew=o,this.state.yLast=a,$("#magazineViewport").css("transform","scale("+i.scale+")translate("+i.xNew+"px, "+i.yNew+"px)"))}},setZoom:function(e,t,i){this.isEditMode||this.isZoomDisabled||("zoomIn"==e?this.zoomCenter():"zoomOut"==e?this.zoomReset():"zoomLayer"==e&&this.zoomToLayer("#layer"+t,i))},zoomToLayer:function(e,t){this.state.pinchScale=0;const i=t.scale;if(this.isZoomIn)return;let n=$("#canvas").height()/$("#canvas").width()<$(e).height()/$(e).width()?$("#canvas").height()/$(e).height():$("#canvas").width()/$(e).width();n*=i,this.zoomSet({dir:1,increment:n,force:!0,animate:"animated",noRender:!0},{x:$(e).offset().left,y:$(e).offset().top},()=>{let t=-$(e).offset().left/n+($("#canvas").width()+$("#canvas").offset().left)/n/2-$(e).width()/2,i=-$(e).offset().top/n+($("#canvas").height()+$("#canvas").offset().top)/n/2-$(e).height()/2;var o=hzflip.controls.zoom.pos;o.scale=n,o.xNew=t,o.yNew=i,$("#magazineViewport").addClass("animated"),$("#magazineViewport").css("transform","scale("+o.scale+")translate("+o.xNew+"px, "+o.yNew+"px)"),setTimeout(()=>{$("#magazineViewport").one("transitionend",()=>{$("#magazineViewport").removeClass("animated"),this.renderPages()})})})},zoomReset:function(e){this.state.pinchScale=0,this.state.scale=1,this.state.xImage=0,this.state.yImage=0,this.state.xLast=0,this.state.yLast=0,this.pos.scale=1,$("#magazineViewport").addClass("animated"),$("#magazineViewport").css("transform",this.initial.transform),$("#magazineViewport").css("transform-origin",this.initial.origin),heyzine.setZoomViewer("zoomOut"),$("#magazineViewport").one("transitionend",(function(){$("#magazineViewport").removeClass("animated"),null!=e&&e()})),this.setZoomOutControls()},zoomCenter:function(e,t){this.state.pinchScale=0;const i=null!=e?e:1,n=null!=t?t:1.5;this.zoomSet({dir:i,increment:n,animate:"animated"},{x:$("#canvas").width()/2,y:$("#canvas").height()/2})},zoomSet:function(e,t,i){var n=t.x,o=t.y;if(this.state.xImage=this.state.xImage+(n-this.state.xLast)/this.state.scale,this.state.yImage=this.state.yImage+(o-this.state.yLast)/this.state.scale,this.state.scale>1?this.setZoomInControls():this.setZoomOutControls(),e.size)1==this.state.scale&&e.size>1&&(this.setZoomInControls(),heyzine.setZoomViewer("zoomIn")),this.state.scale=e.size,this.state.scale=this.state.scale<1?1:this.state.scale>6?6:this.state.scale;else{var s=null!=e.increment?e.increment:this.state.inc;e.dir>0?(1==this.state.scale&&(this.setZoomInControls(),heyzine.setZoomViewer("zoomIn")),this.state.scale*=s):this.state.scale/=s,this.state.scale=this.state.scale<1?1:this.state.scale>6&&!e.force?6:this.state.scale}var a=(n-this.state.xImage)/this.state.scale,l=(o-this.state.yImage)/this.state.scale;this.state.xLast=n,this.state.yLast=o;var r=hzflip.controls.zoom.pos;r.scale=this.state.scale,r.xNew=a,r.yNew=l,r.xImage=this.state.xImage,r.yImage=this.state.yImage,1==this.state.scale?(this.zoomReset(),this.state.xLast=0,this.state.yLast=0,this.state.xImage=0,this.state.yImage=0,t.noRender||this.renderPages()):(e.animate?$("#magazineViewport").addClass(e.animate):$("#magazineViewport").removeClass("animated"),$("#magazineViewport").css("transform","scale("+r.scale+")translate("+r.xNew+"px, "+r.yNew+"px)"),"SWIPER"!=heyzine.config.viewer&&$("#magazineViewport").css("transform-origin",r.xImage+"px "+r.yImage+"px"),e.animate?$("#magazineViewport").one("transitionend",()=>{t.noRender||this.renderPages(),null!=i?i():$("#magazineViewport").removeClass(e.animate)}):(t.noRender||this.renderPages(),null!=i&&i()))},setZoomInControls:function(){this.isZoomIn=!0,window.disableTurnEvents=!0,0!=heyzine.design.data.show_slider&&$(".control-bottom .page-bar").hide(),heyzine.stats.trackControls("zoom-in"),$(".zoom-icon").removeClass("zoom-icon-in").addClass("zoom-icon-out"),$(".layer-zoom").removeClass("layer-zoom-in").addClass("layer-zoom-out"),$("#pnlZoomStep").fadeIn("fast"),$(".btnPrevious").fadeOut("fast"),$(".btnNext").fadeOut("fast"),$(".magazine-viewport").addClass("grab")},setZoomOutControls:function(){this.isZoomIn=!1,window.disableTurnEvents=!1,0!=heyzine.design.data.show_slider&&$(".control-bottom .page-bar").fadeIn(),heyzine.progressBar("cancel"),$(".zoom-icon").removeClass("zoom-icon-out").addClass("zoom-icon-in"),$(".layer-zoom").removeClass("layer-zoom-out").addClass("layer-zoom-in"),$("#pnlZoomStep").fadeOut("fast"),$(".btnPrevious").fadeIn("fast"),$(".btnNext").fadeIn("fast"),$(".magazine-viewport").removeClass("grab").removeClass("grabbing")},setEditMode:function(e){this.isEditMode=e},renderPages:function(){!this.timerDelay&&(this.state.scale>=1.5||this.state.scale<=1)&&(this.timerDelay=!0,setTimeout(()=>{const e=heyzine.getVisiblePages();heyzine.progressBar("start",{num:e.length});for(let t=0;t<e.length;t++){const i=e[t],n=$("[page="+e[t]+"] .page-cont"),o=this.state.scale<=1?"normal":this.state.scale>2.5?"xlarge":"large";heyzine.loadPageView(i,n,o).then(()=>{this.timerDelay=!1,heyzine.progressBar("end")}).catch(()=>{})}},500))},getScale:function(){var e=hzflip.controls.zoom.pos;return null==e||null==e.scale||e.scale<1?1:e.scale},turned:function(){1!=this.getScale()&&this.renderPages()}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls.sound={isSoundEnabled:!0,isPageTurnSound:!1,config:{},bindings:function(){$("#btnSoundOff").on("click",()=>(this.isSoundEnabled=!this.isSoundEnabled,this.isSoundEnabled?($("#btnSoundOff").addClass("hz-icn-sound-on").removeClass("hz-icn-sound-off"),heyzine.stats.trackControls("sound-on")):($("#btnSoundOff").removeClass("hz-icn-sound-on").addClass("hz-icn-sound-off"),heyzine.stats.trackControls("sound-off")),heyzine.layers.soundToggle(this.isSoundEnabled),heyzine.firstInteraction(),!1))},destroy:function(){$("#btnSoundOff").off("click")},turning:function(e){if(null!=heyzine.design&&null!=heyzine.design.data&&null!=heyzine.design.data.sound_flip&&(this.isPageTurnSound=!0===heyzine.design.data.sound_flip||1==heyzine.design.data.sound_flip),this.isSoundEnabled&&this.isPageTurnSound){const t=$("#audioPageTurn").get(0),i=$("#audioPageTurn2").get(0),n=$("#audioPageTurn3").get(0);if(null==e)t.volume=.2,t.pause(),t.currentTime=0,t.play();else{const t=heyzine.getVisiblePages();e<t[0]-1||2==t.length&&e>t[1]+1||1==t.length&&e>t[0]+1?(n.volume=.4,n.pause(),n.currentTime=0,n.play()):(i.volume=.4,i.pause(),i.currentTime=0,i.play())}}}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls.share={isVisible:!1,link:"",currentPage:!1,bindings:function(){const e=this;$("#btnShare").on("click",()=>(this.toggleShow(),heyzine.firstInteraction(),!1)),$(".btnShareCopy").on("click",()=>{this.clipboard.copy(this.link),$(".btn-copy-done").fadeIn("fast"),$(".btn-copy-icon").css("opacity","0.1"),setTimeout(()=>{$(".btn-copy-done").fadeOut("fast"),$(".btn-copy-icon").css("opacity","1")},3e3)}),$(".selPageSelector").on("click",()=>{$(".selPageDropDown").is(":visible")?$(".selPageDropDown").hide():$(".selPageDropDown").show()}),$(".selPageDropDown").on("click","div",(function(t){let i=$(this).text();1!=i?($(".selPageSelected").show(),$(".selPageEmpty").hide(),$(".btn-sharing-page").addClass("btn-sharing-page-selected"),e.currentPage=!0):($(".selPageEmpty").show(),$(".selPageSelected").hide(),$(".btn-sharing-page").removeClass("btn-sharing-page-selected"),e.currentPage=!1),e.setPage(i),heyzine.goToPage(i),$(".selPageDropDown").hide(),t.stopPropagation()})),$(".selPageDropDown").on("mousewheel","div",(function(e){e.stopPropagation()})),$(document).on("mouseup",e=>{let t=$("#pnlShare"),i=$("#btnShare");t.is(e.target)||0!==t.has(e.target).length||i.is(e.target)||0!==i.has(e.target).length||this.toggleShow(!1),t=$(".selPageDropDown"),t.is(e.target)||0!==t.has(e.target).length||$(".selPageDropDown").hide()}),$("#pnlShare [data-share]").on("click",(function(){const t=$(this).attr("data-share");return e.socialOpen(t,e.link),e.toggleShow(!1),!1}))},setPage:function(e){this.currentPage&&(this.setLink(e),$(".selPageSelected").html("p"+e))},setLink:function(e){let t="";if(1!=e&&null!=e&&(t="#page/"+e),heyzine.config.domain.indexOf(document.location.host)>=0){const e="https://heyzine.com"==heyzine.config.domain?"/flip-book":"";this.link=heyzine.config.domain+e+"/"+heyzine.config.custom_name+t}else{const e=document.location.href.replace(document.location.hash,"");this.link=e+t}},toggleShow:function(e){if(this.isVisible=null==e?!this.isVisible:e,this.setLink(),this.isVisible){heyzine.controls.showPanel("#btnShare","#pnlShare"),$(".selPageDropDown").html("");for(let e=1;e<=heyzine.config.num_pages;e++)$(".selPageDropDown").append("<div>"+e+"</div>");$(".txtLink").val(this.link),$("#pnlShare").fadeIn("fast")}else $("#pnlShare").hide()},destroy:function(){$("#btnShare").off("click"),$("#pnlShare [data-share]").off("click")},turned:function(e){this.setPage(e)},turning:function(e){},socialOpen:function(e,t){"facebook"==e&&window.open("https://www.facebook.com/sharer.php?u="+encodeURI(t)),"twitter"==e&&window.open("https://twitter.com/intent/tweet?url="+encodeURI(t)),"linkedin"==e&&window.open("https://www.linkedin.com/sharing/share-offsite/?url="+encodeURI(t)),"whatsapp"==e&&window.open("https://wa.me/?text="+encodeURI(t)),"telegram"==e&&window.open("https://t.me/share/url?url="+encodeURI(t)),"pinterest"==e&&window.open("https://www.pinterest.com/pin/create/button/?url="+encodeURI(t)),"messenger"==e&&window.open("https://www.facebook.com/dialog/send?app_id=887549652630742&link="+encodeURI(t)+"&redirect_uri="+encodeURI(t)),"email"==e&&window.open("mailto://?body="+encodeURI(t))},clipboard:{copy:function(e){navigator.clipboard?navigator.clipboard.writeText(e).then((function(){console.log("async clipboard copy")}),(function(e){console.error("async clipboard error ",e)})):this.clipboard.fallback(e)},copyRaw:function(e){var t,i;document.createRange?((t=document.createRange()).selectNode(e),(i=window.getSelection()).removeAllRanges(),i.addRange(t)):((t=document.body.createTextRange()).moveToElementText(e),t.select());try{var n=document.execCommand("copy");return console.log(n),i&&i.removeAllRanges(),!!n}catch(e){return!1}},fallback:function(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),this.copyRaw(t),document.body.removeChild(t)}}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls.toolbar={def:{vertical:20,centerVertical:10,gapIcon:12,padding:{horizontal:10,vertical:6,fullX:20},horizontal:function(){return $(window).width()<790?20:50},canvas:function(){return $(window).width()<790?10:20},zoom:function(){return $(window).width()<790?10:50},arrows:function(){return 3!=heyzine.design.data.arrows&&$(window).width()>750?1==heyzine.design.data.arrows?32:14:0},panel:{horizontal:function(){return $(document).width()<790?5:$(window).width()<930?20:50},vertical:function(){return $(window).height()<700?5:20}},slider:{pad:24}},sliderInBar:!1,setDisposition:function(e){if(null==$("#pnlControls").offset()||null==e)return;let t=e,i=this.parseStyle(t.controls_style);$("#pnlControls").attr("style",t.controls_style),"100%"!=$("#pnlControls").get(0).style.width&&"100%"!=$("#pnlControls").get(0).style.height||$("#pnlControls").css("border-radius",0),$("#pnlControls").removeClass("controls-disp-bottom").removeClass("controls-disp-top").removeClass("controls-disp-center"),"top"==i.alignY?$("#pnlControls").addClass("controls-disp-top"):"center"==i.alignY?$("#pnlControls").addClass("controls-disp-center"):$("#pnlControls").addClass("controls-disp-bottom"),$(".controls-pdf").css("background-color",$("#pnlControls").css("background-color")),0!=t.show_slider&&this.setSliderDisposition(i,!0),this.setTitleDisposition(i),this.setCanvasDisposition(i)},setCanvasDisposition:function(e){let t=this.def.canvas(),i=this.def.arrows();if(0==e.float&&"horizontal"==e.direction){const n=$("#pnlControls").outerHeight()+t,o=0==heyzine.design.data.show_slider||this.sliderInBar?0:this.def.slider.pad;"top"==e.alignY?$("#canvas").css({"padding-left":t+i+"px","padding-right":t+i+"px","padding-top":n+"px","padding-bottom":t+o+"px"}):$("#canvas").css({"padding-left":t+i+"px","padding-right":t+i+"px","padding-top":t+"px","padding-bottom":n+o+"px"})}else if(0==e.float&&"vertical"==e.direction){const n=$("#pnlControls").outerWidth()+t,o=0==heyzine.design.data.show_slider||this.sliderInBar?0:this.def.slider.pad;"left"==e.alignX?$("#canvas").css({"padding-left":n+i+"px","padding-right":t+i+"px","padding-top":t+"px","padding-bottom":t+o+"px"}):$("#canvas").css({"padding-left":t+i+"px","padding-right":n+i+"px","padding-top":t+"px","padding-bottom":t+o+"px"})}else if(1==e.float){const e=0==heyzine.design.data.show_slider?0:this.def.slider.pad;$("#canvas").css({"padding-left":t+i+"px","padding-right":t+i+"px","padding-top":t+"px","padding-bottom":e+t+"px"})}},setTitleDisposition:function(e){let t=this.def.panel.horizontal(),i=this.def.vertical;if($(".flipbook-title").is(":visible")){let n=$("#canvas").get(0).style.paddingTop.replace("px","");n=""!=$.trim(n)?parseInt(n):0;let o=$("#canvas").get(0).style.paddingLeft.replace("px","")-this.def.arrows();o=""!=$.trim(o)?parseInt(o):0;let s=50==this.def.panel.horizontal()?1.5:2,a=this.def.panel.horizontal()*s;const l=$("#pnlControls").outerHeight()+i+n;$("#pnlControls").outerWidth();if($(".flipbook-title").css({top:"",left:""}),0==e.float)"top"==e.alignY&&"horizontal"==e.direction?$(".flipbook-title").css({top:n}):"bottom"==e.alignY&&"horizontal"==e.direction?$(".flipbook-title").css({top:i+"px"}):"left"==e.alignX&&"vertical"==e.direction?$(".flipbook-title").css({top:i+"px",left:o+"px"}):"right"==e.alignX&&"vertical"==e.direction&&$(".flipbook-title").css({top:i+"px"});else if("top left"==e.position)if("vertical"==e.direction){let e=n;const t=this.parseLogoStyle(heyzine.design.data.company_logo_style);"top"==t.position[0]&&"left"==t.position[1]&&(e+=$(".logo-backs2").height()+i),$(".flipbook-title").css({top:e+"px",left:$("#pnlControls").outerWidth()+a+"px"})}else $(".flipbook-title").css({top:l+"px",left:t+"px"});else"center left"==e.position||"bottom left"==e.position?$(".flipbook-title").css({top:this.def.vertical+"px",left:t+"px"}):$(".flipbook-title").css({top:this.def.vertical+"px"});const r=$(window).width()-$(".flipbook-title").offset().left-$("#canvas").offset().left-10;$(".flipbook-title").css("width",r+"px")}else $(".flipbook-title").css({top:"",left:""})},setZoomStepDisposition:function(e){"horizontal"==e.direction?("top"==e.alignY?$("#pnlZoomStep").css({top:"100px",bottom:"auto"}):$("#pnlZoomStep").css({top:"auto",bottom:"100px"}),"left"==e.alignX?$("#pnlZoomStep").css({left:this.def.zoom()+"px",right:"auto"}):$("#pnlZoomStep").css({left:"auto",right:this.def.zoom()+"px"})):("bottom"==e.alignY?$("#pnlZoomStep").css({top:"auto",bottom:this.def.vertical}):$("#pnlZoomStep").css({top:this.def.vertical,bottom:"auto"}),"left"==e.alignX?$("#pnlZoomStep").css({left:"100px",right:"auto"}):$("#pnlZoomStep").css({left:"auto",right:"100px"}))},setSliderDisposition:function(e,t){if(0!=$(".control-bottom").length&&(this.sliderInBar=t,($("#pnlControls .slider-vertical").length>0||$("#pnlControls .slider-horizontal").length>0)&&($(".control-bottom").appendTo("#magazineViewport"),$(".slider-vertical").remove(),$(".slider-horizontal").remove(),$(".control-bottom").get(0).style=""),0==e.float&&t))if("vertical"==e.direction){let t=$('<div class="slider-toolbar slider-vertical">');"bottom right"==e.position||"bottom left"==e.position?t.prependTo("#pnlControls"):t.appendTo("#pnlControls"),"right"==e.alignX?t.addClass("sliderbar-right"):t.addClass("sliderbar-left"),$(".control-bottom").appendTo(t)}else if("horizontal"==e.direction){let t=$('<div class="slider-toolbar slider-horizontal">');"top"==e.alignY?t.addClass("sliderbar-top"):t.addClass("sliderbar-bottom"),"right"==e.alignX?t.prependTo("#pnlControls"):t.appendTo("#pnlControls"),$(".control-bottom").appendTo(t)}},resizeViewport:function(){if(null==$("#pnlControls").offset())return;let e=this.parseStyle(heyzine.design.data.controls_style);if($(window).width()<=475||$(window).height()<=475)$(".controls-pdf").removeClass("controls-lg").removeClass("controls-md").addClass("controls-sm");else if($(window).width()<=575||$(window).height()<=575)"sm"!=heyzine.design.data.controls_size&&$(".controls-pdf").removeClass("controls-lg").removeClass("controls-sm").addClass("controls-md");else{let e=""!=$.trim(heyzine.design.data.controls_size)?heyzine.design.data.controls_size:"md";$(".controls-pdf").removeClass("controls-lg").removeClass("controls-md").removeClass("controls-sm").addClass("controls-"+e)}if(1==e.float){if("center"!=e.alignX){const t="left"==e.alignX?"left":"right",i="left"==e.alignX?"right":"left",n="left"==e.alignX?"margin-left":"margin-right";$("#pnlControls").css(t,this.def.panel.horizontal()+"px"),$("#pnlControls").css(i,"auto"),$(".logo-backs2").css(n,-50+this.def.panel.horizontal()+"px")}if("center"!=e.alignY){const t="top"==e.alignY?"top":"bottom",i="top"==e.alignY?"bottom":"top";$("#pnlControls").css(t,this.def.panel.vertical()+"px"),$("#pnlControls").css(i,"auto")}}if(0==e.float&&"vertical"==e.direction&&0!=heyzine.design.data.show_slider){let t=0;$("#pnlControls .hz-icon:visible,#pnlControls .hz-icon-2:visible").each((function(){t+=$(this).height()}));let i=$("#pnlControls .hz-icon:visible").length+$("#pnlControls .hz-icon-2:visible").length,n=$("#pnlControls").height()-t-i*this.def.gapIcon-2*this.def.vertical;n<200?this.sliderInBar&&this.setSliderDisposition(e,!1):(this.sliderInBar||this.setSliderDisposition(e,!0),$(".slider-vertical .control-bottom").css({width:n+"px",transform:"rotate(90deg) translateX(-"+n+"px)"}),$(".slider-vertical:first-child").length>0?$(".slider-vertical").css({height:n+"px","margin-bottom":this.def.vertical}):$(".slider-vertical").css({height:n+"px","margin-top":this.def.vertical}))}else if(0==e.float&&0!=heyzine.design.data.show_slider){let t=0;$("#pnlControls .hz-icon:visible,#pnlControls .hz-icon-2:visible").each((function(){t+=$(this).width()}));let i=$("#pnlControls .hz-icon:visible,#pnlControls .hz-icon-2:visible").length,n=$("#pnlControls").width()-t-i*this.def.gapIcon-this.def.horizontal();n<200?this.sliderInBar&&this.setSliderDisposition(e,!1):(this.sliderInBar||this.setSliderDisposition(e,!0),$(".slider-horizontal .control-bottom").css({width:n+"px"}),$(".slider-horizontal:first-child").length>0?$(".slider-horizontal").css({width:n+"px","margin-right":this.def.horizontal()/2+"px"}):$(".slider-horizontal").css({width:n+"px","margin-left":this.def.horizontal()/2+"px"}))}this.setCanvasDisposition(e),this.setTitleDisposition(e),this.setZoomStepDisposition(e);let t=$("#canvas").offsetParent().offset().left,i=$("#pnlControls").offset().left+t;$("#pnlControls").removeClass("controls-xs-snap-top").removeClass("controls-xs-snap-bottom").removeClass("controls-snap"),"100%"!=$("#pnlControls").prop("style").width&&(i<0||$("#pnlControls").offset().left+$("#pnlControls").width()>$(window).width()||"auto"==$("#pnlControls").prop("style").right&&$("#pnlControls").offset().left-t>$(window).width()-$("#pnlControls").offset().left-$("#pnlControls").width()||"auto"!=$("#pnlControls").prop("style").right&&$("#pnlControls").offset().left-t<$(window).width()-$("#pnlControls").offset().left-$("#pnlControls").width()?($("#pnlControls").addClass("controls-snap"),"auto"!=$("#pnlControls").prop("style").top?$("#pnlControls").addClass("controls-xs-snap-top"):$("#pnlControls").addClass("controls-xs-snap-bottom")):$("#pnlControls").removeClass("controls-snap"))},getStyle:function(){return this.parseStyle(heyzine.design.data.controls_style)},parseStyle:function(e){let t=$(".controls-pdf").css("background-color");if(""==$.trim(e))return{position:"top right",direction:"horizontal",float:1,backgroundColor:t,alignX:"right",alignY:"top"};let i=$.cssToObject(e),n="",o=1,s="horizontal",a="top",l="right";return"50%"==i.top&&"auto"==i.bottom&&"translateY(-50%)"==i.transform?(n+="center",a="center"):"auto"==i.bottom&&"auto"!=i.top?(n+="top",a="top"):"auto"!=i.bottom&&"auto"==i.top?(n+="bottom",a="bottom"):"start"==i["justify-content"]?(n+="top",a="top"):"end"==i["justify-content"]?(n+="bottom",a="bottom"):"center"==i["justify-content"]&&(n+="center",a="center"),"50%"==i.left&&"auto"==i.right&&"translateX(-50%)"==i.transform?(n+=" center",l="center"):"auto"!=i.left&&"auto"==i.right?(n+=" left",l="left"):"auto"==i.left&&"auto"!=i.right?(n+=" right",l="right"):"start"==i["justify-content"]?(n+=" left",l="left"):"end"==i["justify-content"]?(n+=" right",l="right"):"center"==i["justify-content"]&&(n+=" center",l="center"),o="100%"==i.width||"100%"==i.height?0:1,s="column"==i["flex-direction"]?"vertical":"horizontal",{position:n,direction:s,float:o,backgroundColor:t,alignX:l,alignY:a}},serializeStyle:function(e){const t=e.position.split(" "),i=this.def.horizontal()+"px",n=this.def.vertical+"px",o=this.def.gapIcon+"px";let s=n,a="auto",l="50%",r="auto",h="",d="",c="",p="",g="",u="",f="",m="",y="",w=0!=heyzine.design.data.show_slider?this.def.slider.pad:0;return"top"==t[0]?(s=n,a="auto"):"bottom"==t[0]?(s="auto",a=this.def.vertical+w+"px"):"center"==t[0]&&(s="50%",a="auto",h="translateY(-50%)"),"center"==t[1]?(l="50%",r="auto",h="translateX(-50%)"):"left"==t[1]?(l=i,r="auto"):"right"==t[1]&&(l="auto",r=i),g+="background-color:"+e.backgroundColor+";",1==e.float?"horizontal"==e.direction?(m=this.def.padding.horizontal+"px",y=this.def.padding.vertical+"px"):"vertical"==e.direction&&(m=this.def.padding.vertical+"px",y=this.def.padding.horizontal+"px",f=o):"horizontal"==e.direction?(m=this.def.padding.fullX+"px",y=this.def.padding.vertical+"px"):"vertical"==e.direction&&(m=this.def.padding.vertical+"px",y=this.def.padding.fullX+"px",f=o),0==e.float?(d="center","horizontal"==e.direction?("top"==t[0]?(l="0px",r="0px",s="0px",c="100%"):"bottom"==t[0]&&(l="0px",r="0px",a="0px",c="100%"),"left"==t[1]?d="start":"right"==t[1]?d="end":"center"==t[1]&&(d="center",h="")):("top"==t[0]?d="start":"bottom"==t[0]?d="end":"center"==t[0]&&(d="center"),"left"==t[1]?(l="0px",r="auto",s="0px",a="0px",c="auto",p="100%",h=""):"right"==t[1]&&(l="auto",r="0px",s="0px",a="0px",c="auto",p="100%",h=""))):"center"==t[1]&&"horizontal"==e.direction&&("top"==t[0]?s=this.def.centerVertical+"px":"bottom"==t[0]&&(a=this.def.centerVertical+w+"px")),"horizontal"==e.direction?u="row":"vertical"==e.direction&&(u="column"),g=this.addStyle(g,"top",s),g=this.addStyle(g,"bottom",a),g=this.addStyle(g,"width",c),g=this.addStyle(g,"height",p),g=this.addStyle(g,"left",l),g=this.addStyle(g,"right",r),g=this.addStyle(g,"transform",h),g=this.addStyle(g,"justify-content",d),g=this.addStyle(g,"flex-direction",u),g=this.addStyle(g,"padding-left",m),g=this.addStyle(g,"padding-right",m),g=this.addStyle(g,"padding-top",y),g=this.addStyle(g,"padding-bottom",y),g=this.addStyle(g,"gap",f),g},serializeLogoStyle:function(e,t){let i=e.size,n=e.position,o=t.position,s=null!=i?{"max-width":-1==i.indexOf("%")?i+"%":i}:{},a={},l={};if(null!=n){if("top"==n[0]){let e=parseInt($("#canvas").get(0).style.paddingTop.replace("px","")),i=0,s=i;"left"==n[1]&&$(".flipbook-title").is(":visible")?s=1==t.float&&"vertical"==t.direction&&"top left"==o?i:$(".flipbook-title").position().top+$(".flipbook-title").outerHeight()+25-e:"horizontal"==t.direction&&("left"==n[1]&&"top left"==o||"right"==n[1]&&"top right"==o)&&1==t.float&&(s=$("#pnlControls").position().top+$("#pnlControls").outerHeight()+25-e),"SWIPER"==heyzine.config.viewer&&(s+=e),l={top:s+"px",bottom:"auto"}}else{let e=parseInt($("#canvas").get(0).style.paddingBottom.replace("px","")),i=0;if(1==t.float&&"horizontal"==t.direction&&("left"==n[1]&&"bottom left"==o||"right"==n[1]&&"bottom right"==o)){let t=0==heyzine.design.data.show_slider?0:this.def.slider.pad;i=$("#pnlControls").outerHeight()+10+25+t-e+"px"}"SWIPER"==heyzine.config.viewer&&(i+=e),l={top:"auto",bottom:i}}if("right"==n[1]){let e=parseInt($("#canvas").get(0).style.paddingRight.replace("px","")),i=-e+this.def.horizontal();1!=t.float||"top right"!=o&&"bottom right"!=o&&"center right"!=o?0!=t.float||"vertical"!=t.direction||"top right"!=o&&"bottom right"!=o&&"center right"!=o||(i+=this.def.canvas()):"vertical"==t.direction&&("top right"==o&&"top"==n[0]||"bottom right"==o&&"bottom"==n[0])&&(i+=$("#pnlControls").outerWidth()+this.def.vertical+4),"SWIPER"==heyzine.config.viewer&&(i+=e),a={left:"auto",right:i+"px"}}else{let e=parseInt($("#canvas").get(0).style.paddingLeft.replace("px","")),i=-e+this.def.horizontal();1!=t.float||"top left"!=o&&"bottom left"!=o&&"center left"!=o?0!=t.float||"vertical"!=t.direction||"top left"!=o&&"bottom left"!=o&&"center left"!=o||(i+=this.def.canvas()):"vertical"==t.direction&&("bottom left"==o&&"bottom"==n[0]||"top left"==o&&"top"==n[0])&&(i+=$("#pnlControls").outerWidth()+this.def.vertical+4),"SWIPER"==heyzine.config.viewer&&(i+=e),a={left:i+"px",right:"auto"}}}let r=$.extend({},s,l,a);return JSON.stringify(r)},parseLogoStyle:function(e){let t=JSON.parse(e),i=""!=$.trim(t["max-width"])?t["max-width"]:20,n=["bottom","left"];return n[0]="auto"==t.top?"bottom":"top",n[1]="auto"==t.left?"right":"left",{position:n,size:i}},addStyle:function(e,t,i){return""!=$.trim(i)&&(e+=t+": "+i+"; "),e}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls.search={inited:!1,isVisible:!1,searchedPages:0,lastSearch:"",highlighting:[],bindings:function(){const e=this;$("#btnSearch").on("click",()=>(this.toggleShow(),heyzine.firstInteraction(),$("#txtContentSearch").focus(),$("#txtContentSearch").select(),!1)),$("#btnContentSearch").on("click",()=>{this.clearHighlight();const e=$("#txtContentSearch").val();""!=$.trim(e)&&(this.lastSearch=e,$("#btnContentSearchCancel").show(),$("#btnContentSearch").hide(),this.findInContent(e))}),$("#btnContentSearchCancel").on("click",()=>{$("#btnContentSearchCancel").hide(),$("#btnContentSearch").show(),$("#txtContentSearch").val(""),$(".panel-search-results").hide(),$(".panel-search-results").html(""),this.clearHighlight(),$("#txtContentSearch").focus()}),$("#pnlSearch").on("click","[data-found-page]",(function(){const t=parseInt($(this).attr("data-found-page"));return heyzine.goToPage(t,"button"),$(".panel-search-results").find("[data-found-page]").removeClass("selected"),$(".panel-search-results").find('[data-found-page="'+t+'"]').addClass("selected"),heyzine.getVisiblePages().filter(e=>e==t).length>0&&($(".text-highlight-sub").hide(),setTimeout(()=>{$(".text-highlight-sub").show()},200)),e.toggleShow(!1),!1})),$(document).on("mouseup",e=>{let t=$("#pnlSearch"),i=$("#btnSearch");t.is(e.target)||0!==t.has(e.target).length||i.is(e.target)||0!==i.has(e.target).length||this.toggleShow(!1)}),$("#pnlSearch").on("wheel mousemove touchstart touchend touchmove",e=>{e.stopPropagation()}),$("#txtContentSearch").on("keypress",e=>{"Enter"==e.key&&$("#btnContentSearch").trigger("click"),$("#txtContentSearch").val()!=this.lastSearch&&($("#btnContentSearchCancel").hide(),$("#btnContentSearch").show())}),heyzine.design.data.show_search&&$(window).on("keydown",e=>{if("Escape"!=e.key){if(this.isVisible){let t=$(".panel-search-results-item");if(("ArrowDown"==e.key||"ArrowUp"==e.key)&&t.length>0)if($("#txtContentSearch").blur(),0==$(".panel-search-results-item.focused").length)$($(".panel-search-results-item").get(0)).addClass("focused");else{let t=$(".panel-search-results-item");for(let i=0;i<t.length;i++)if($(t[i]).hasClass("focused")){let n;$(t[i]).removeClass("focused"),n="ArrowUp"==e.key?t[i-1<0?0:i-1]:t[i+1>t.length-1?t.length-1:i+1],$(n).addClass("focused"),$(n).focus(),$(".panel-search-results").get(0).scrollTop=$(n).get(0).offsetTop-3*$(n).height();break}}else"Enter"==e.key&&t.length>0&&1==$(".panel-search-results-item.focused").length&&$(".panel-search-results-item.focused").trigger("click")}(e.ctrlKey||e.metaKey)&&70===e.keyCode&&($("#btnSearch").trigger("click"),e.preventDefault())}else this.toggleShow(!1)})},toggleShow:function(e){this.isVisible=null==e?!this.isVisible:e,this.isVisible?(this.inited||(hzflip.controls.searchProcess.init(),this.inited=!0),heyzine.controls.showPanel("#btnSearch","#pnlSearch"),$("#pnlSearch").fadeIn("fast")):$("#pnlSearch").hide()},destroy:function(){$("#btnSearch").off("click"),$("#btnContentSearch").off("click"),$("#pnlSearch [data-found-page]").off("click")},turned:function(e){const t=$("#txtContentSearch").val();""!=$.trim(t)&&this.findAndHighlight(e,t);const i=heyzine.getVisiblePages();$(".panel-search-results").find("[data-found-page]").removeClass("selected");for(let e=0;e<i.length;e++)$(".panel-search-results").find('[data-found-page="'+i[e]+'"]').addClass("selected")},turning:function(e){},resizeViewport:function(){const e=$("#txtContentSearch").val();""!=$.trim(e)&&this.findAndHighlight(heyzine.getCurrentPage(),e)},findInContent:function(e){const t=heyzine.getVisiblePages();this.searchedPages=0,$(".panel-search-results").show(),$(".panel-search-results").html("");for(let i=1;i<=heyzine.config.num_pages;i++)heyzine.pdf.getPage(i).then(e=>({text:e.getTextContent(),viewport:e.getViewport()})).then(n=>{n.text.then(n=>{const o=[];for(const e of n.items)o.push(e.str),e.hasEOL&&o.push("\n");const s=o.join("");[hzflip.controls.searchProcess._pageContents[i],hzflip.controls.searchProcess._pageDiffs[i],hzflip.controls.searchProcess._hasDiacritics[i]]=hzflip.controls.searchProcess.normalize(s);let a=hzflip.controls.searchProcess._pageContents[i];if(null!=a&&a.length>0&&""!=$.trim(a)){let n,o,a;[n,o,a]=hzflip.controls.searchProcess.normalize(e);let l=hzflip.controls.searchProcess._calculateMatch(n,i);if(l.length>0){let o=l[0],a=0;for(;a<o;)"\n"==s[a]&&o++,a++;const r=20,h=s.replaceAll("\n"," "),d=o-r<0?0:o-r,c=h.substr(d,o-d)+("<strong>"+h.substr(o,n.length)+"</strong>")+h.substr(o+n.length,o+n.length+r);$(".panel-search-results").append('<div class="panel-search-results-item" data-found-page="'+i+'"><span class="search-result-num">'+heyzine.lang.translate.fromKey("page")+" "+i+'</span><span class="search-result-text">'+$.trim(c)+"</span></div>"),$(".panel-search-results").find(".panel-search-results-item").sort((function(e,t){return $(e).attr("data-found-page")-$(t).attr("data-found-page")})).appendTo(".panel-search-results"),t.filter(e=>e==i).length>0&&this.findAndHighlight(i,e)}}this.searchedPages++,this.updateSearchBar()}).catch(e=>{console.log(e)})})},clearHighlight:function(e){null!=e?$(".page-wrapper[page="+e+"] .page-cont .text-highlight").remove():$(".text-highlight").remove()},findAndHighlight:async function(e,t){if(!this.highlighting[e]){let i,n,o;[i,n,o]=hzflip.controls.searchProcess.normalize(t.toLowerCase()),this.highlighting[e]=!0,this.clearHighlight();let s=e-1<1?1:e+1>heyzine.config.num_pages?e-2:e-1,a=e+1>heyzine.config.num_pages?heyzine.config.num_pages:e-1<1?e+2:e+1;for(let e=s;e<=a;e++)hzflip.controls.searchProcess._calculateMatch(i,e),await this.findAndHighlightOne(e,i);this.highlighting[e]=!1}},findAndHighlightOne:async function(e,t){return new Promise((t,i)=>{heyzine.pdf.getPage(parseInt(e)).then(t=>{let i=$(".page-wrapper .page-cont").width(),n=heyzine.loadViewport(t,e,i);return{text:t.getTextContent(),viewport:n}}).then(n=>{n.text.then(i=>{let o=hzflip.controls.searchProcess._updateMatches(e,i.items),s=i.items,a=i.styles,l=null;this.clearHighlight(e);for(const t of o){const i=t.begin,o=t.end;if(l&&i.divIdx===l.divIdx?this.createHighlight(n.viewport,e,a,s[l.divIdx],l.divIdx,l.offset,i.offset,""):(null!==l&&this.createHighlight(n.viewport,e,a,s[l.divIdx],l.divIdx,l.offset,null,""),this.createHighlight(n.viewport,e,a,s[i.divIdx],i.divIdx,0,i.offset,"")),i.divIdx===o.divIdx)this.createHighlight(n.viewport,e,a,s[i.divIdx],i.divIdx,i.offset,o.offset,"highlight-full");else{this.createHighlight(n.viewport,e,a,s[i.divIdx],i.divIdx,i.offset,null,"highlight-start");for(let t=i.divIdx+1,l=o.divIdx;t<l;t++)this.createHighlight(n.viewport,e,a,s[t],t,null,null,"highlight-middle");this.createHighlight(n.viewport,e,a,s[o.divIdx],o.divIdx,0,o.offset,"highlight-end")}l=o}t()}).catch(e=>{console.log(e),i()})})})},createHighlight:function(e,t,i,n,o,s,a,l){let r="p"+t+"l"+o,h=$('[data-highlight-id="'+r+'"]');if(h.length<=0){h=$('<div class="text-highlight" data-highlight-id="'+r+'"></div>');const o=hzflip.controls.searchProcess.transformMatrix(e.transform,n.transform);let s=0,a=0,l=Math.atan2(o[1],o[0]);const d=i[n.fontName];d.vertical&&(l+=Math.PI/2);const c=Math.hypot(o[2],o[3]);let p=c*hzflip.controls.searchProcess.getAscent(d.fontFamily),g="";0===l?(s=o[4],a=o[5]-p):(s=o[4]+p*Math.sin(l),a=o[5]-p*Math.cos(l),l*=180/Math.PI,g=` rotate(${l}deg)`);const u=window.devicePixelRatio||1;let f=e.scale,m=hzflip.controls.searchProcess.measureText(c,d.fontFamily,n.str);m>0&&(f=(d.vertical?n.height:n.width)*e.scale*u/m),h.css({transform:"scaleX("+f+")"+g,fontSize:`${c}px`,fontFamily:d.fontFamily,left:`${s}px`,top:`${a}px`}),h.appendTo(".page-wrapper[page="+t+"] .page-cont")}let d=n.str.substring(null==s?0:s,null==a?n.str.length:a),c=null;c=$('<span class="text-highlight-sub '+l+'">'+d+"\n</span>"),c.appendTo(h)},updateSearchBar:function(){let e=Math.ceil(this.searchedPages/heyzine.config.num_pages*100);$(".search-progress").css("width",e+"%"),$(".search-progress").show(),$(".panel-search-results .panel-search-results-item").length<=0&&($(".panel-search-results .panel-search-results-empty").remove(),$(".panel-search-results").append('<div class="panel-search-results-item panel-search-results-empty">'+heyzine.lang.translate.fromKey("searching")+"</div>")),e>=100&&($(".search-progress").hide(),$(".panel-search-results .panel-search-results-empty").remove(),$(".panel-search-results .panel-search-results-item").length<=0&&$(".panel-search-results").append('<div class="panel-search-results-item panel-search-results-empty">'+heyzine.lang.translate.fromKey("noresults")+"</div>"))}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls.searchProcess={_pageContents:[],_pageDiffs:[],_hasDiacritics:[],_pageMatches:[],_pageMatchesLength:[],_layoutTextCtx:null,_layoutTextLastFontSize:null,_layoutTextLastFontFamily:null,normalizationRegex:null,matches:[],ascentCache:new Map,DEFAULT_FONT_SIZE:30,DEFAULT_FONT_ASCENT:.8,CHARACTERS_TO_NORMALIZE:{"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},DIACRITICS_EXCEPTION:null,DIACRITICS_REG_EXP:/\p{M}+/gu,SPECIAL_CHARS_REG_EXP:/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,NOT_DIACRITIC_FROM_END_REG_EXP:/([^\p{M}])\p{M}*$/u,NOT_DIACRITIC_FROM_START_REG_EXP:/^\p{M}*([^\p{M}])/u,init:function(){this.DIACRITICS_EXCEPTION=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),this.DIACRITICS_EXCEPTION_STR=[...this.DIACRITICS_EXCEPTION.values()].map(e=>String.fromCharCode(e)).join("");const e=document.createElement("canvas");("undefined"==typeof PDFJSDev||PDFJSDev.test("MOZCENTRAL || GENERIC"))&&(e.mozOpaque=!0),this._layoutTextCtx=e.getContext("2d",{alpha:!1})},destroy:function(){this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)},normalize:function(e){if(!this.normalizationRegex){const e=Object.keys(this.CHARACTERS_TO_NORMALIZE).join("");this.normalizationRegex=new RegExp(`([${e}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}const t=[];let i;for(;null!==(i=this.DIACRITICS_REG_EXP.exec(e));)t.push([i[0].length,i.index]);let n=e.normalize("NFD");const o=[[0,0]];let s=0,a=0,l=0,r=0,h=!1;return n=n.replace(this.normalizationRegex,(e,i,n,d,c,p)=>{if(p-=l,i){const t=this.CHARACTERS_TO_NORMALIZE[e],i=t.length;for(let e=1;e<i;e++)o.push([p-a+e,a-e]);return a-=i-1,t}if(n){const e=n.endsWith("\n"),i=e?n.length-2:n.length;h=!0;let d=i;null!=t[s]&&null!=t[s][1]&&p+r===t[s][1]&&(d-=t[s][0],++s);for(let e=1;e<d+1;e++)o.push([p-1-a+e,a-e]);return a-=d,l+=d,e?(p+=i-1,o.push([p-a+1,1+a]),a+=1,l+=1,r+=1,n.slice(0,i)):n}return d?(o.push([p-a+1,1+a]),a+=1,l+=1,r+=1,d.charAt(0)):(o.push([p-a+1,a-1]),a-=1,l+=1,r+=1," ")}),o.push([n.length,a]),[n,o,h]},getOriginalIndex:function(e,t,i){if(!e)return[t,i];const n=t,o=t+i;let s=this.binarySearchFirstItem(e,e=>e[0]>=n);e[s][0]>n&&--s;let a=this.binarySearchFirstItem(e,e=>e[0]>=o,s);return e[a][0]>o&&--a,[n+e[s][1],i+e[a][1]-e[s][1]]},binarySearchFirstItem:function(e,t,i=0){let n=i,o=e.length-1;if(o<0||!t(e[o]))return e.length;if(t(e[n]))return n;for(;n<o;){const i=n+o>>1;t(e[i])?o=i:n=i+1}return n},_calculateRegExpMatch:function(e,t,i,n){const o=[],s=[],a=this._pageDiffs[i];let l;for(;null!==(l=e.exec(n));){const[e,t]=this.getOriginalIndex(a,l.index,l[0].length);t&&(o.push(e),s.push(t))}this._pageMatches[i]=o,this._pageMatchesLength[i]=s},_convertToRegExpString:function(e,t){let i=!1;return(e=e.replace(this.SPECIAL_CHARS_REG_EXP,(e,n,o,s,a,l)=>n?`[ ]*\\${n}[ ]*`:o?`[ ]*${o}[ ]*`:s?"[ ]+":a?this.DIACRITICS_EXCEPTION.has(a.charCodeAt(0))?a:"":t?(i=!0,`${l}\\p{M}*`):l)).endsWith("[ ]*")&&(e=e.slice(0,e.length-"[ ]*".length)),[i,e]},_calculateMatch:function(e,t){let i=e;if(0===i.length)return[];const n=this._pageContents[t],o=this._hasDiacritics[t];let s=!1;[s,i]=this._convertToRegExpString(i,o),i=new RegExp(i,`g${s?"u":""}i`),this._calculateRegExpMatch(i,!1,t,n);const a=this._pageMatches[t].length;return a>0&&(this._matchesCountTotal+=a),this._pageMatches[t]},_updateMatches:function(e,t){const i=this._pageMatches[e]||null,n=this._pageMatchesLength[e]||null;if(!i)return[];const o=t.map(e=>e.str);let s=0,a=0;const l=o.length-1,r=[];for(let e=0,t=i.length;e<t;e++){let t=i[e];for(;s!==l&&t>=a+o[s].length;)a+=o[s].length,s++;const h={begin:{divIdx:s,offset:t-a}};for(t+=n[e];s!==l&&t>a+o[s].length;)a+=o[s].length,s++;h.end={divIdx:s,offset:t-a},r.push(h)}return r},measureText:function(e,t,i){const n=window.devicePixelRatio||1;e===this._layoutTextLastFontSize&&t===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=`${e*n}px ${t}`,this._layoutTextLastFontSize=e,this._layoutTextLastFontFamily=t);const{width:o}=this._layoutTextCtx.measureText(i);return o},getAscent:function(e){let t=this._layoutTextCtx;const i=this.ascentCache.get(e);if(i)return i;t.save(),t.font=`${this.DEFAULT_FONT_SIZE}px ${e}`;const n=t.measureText("");let o=n.fontBoundingBoxAscent,s=Math.abs(n.fontBoundingBoxDescent);if(o){t.restore();const i=o/(o+s);return this.ascentCache.set(e,i),i}t.strokeStyle="red",t.clearRect(0,0,this.DEFAULT_FONT_SIZE,this.DEFAULT_FONT_SIZE),t.strokeText("g",0,0);let a=t.getImageData(0,0,this.DEFAULT_FONT_SIZE,this.DEFAULT_FONT_SIZE).data;s=0;for(let e=a.length-1-3;e>=0;e-=4)if(a[e]>0){s=Math.ceil(e/4/this.DEFAULT_FONT_SIZE);break}t.clearRect(0,0,this.DEFAULT_FONT_SIZE,this.DEFAULT_FONT_SIZE),t.strokeText("A",0,this.DEFAULT_FONT_SIZE),a=t.getImageData(0,0,this.DEFAULT_FONT_SIZE,this.DEFAULT_FONT_SIZE).data,o=0;for(let e=0,t=a.length;e<t;e+=4)if(a[e]>0){o=this.DEFAULT_FONT_SIZE-Math.floor(e/4/this.DEFAULT_FONT_SIZE);break}if(t.restore(),o){const t=o/(o+s);return this.ascentCache.set(e,t),t}return this.ascentCache.set(e,DEFAULT_FONT_ASCENT),DEFAULT_FONT_ASCENT},transformMatrix:function(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}},"undefined"==typeof hzflip&&(hzflip={}),hzflip.layers={layers:[],layersDom:[],layersComp:[],config:null,isEditMode:!1,singlePage:!1,soundEnabled:null,lastPage:null,firstInteraction:!1,init:function(e){this.config=e,this.load(e.layers)},firstInteraction:function(){let e=heyzine.getCurrentPage();this.startTurnLayerActions(e),this.lastPage=e},load:function(e){this.layers=e,this.singlePage="SWIPER"==heyzine.config.viewer||2==heyzine.design.data.show_double,this.resetLayersComp(),null!=heyzine.design.data.sound_flip&&(1==$.trim(heyzine.design.data.sound_flip)||!0===heyzine.design.data.sound_flip)||this.existSoundLayers()?$("#btnSoundOff").show():$("#btnSoundOff").hide()},existSoundLayers:function(){return null!=this.layers&&this.layers.findIndex(e=>"background"==e.type&&"audio"==e.media.type||"video"==e.type)>-1},setEditMode:function(e){this.isEditMode=e},setPageDisplay:function(e){this.singlePage="single"==e},turning:function(e){if(null!=this.layers){for(let e=0;e<this.layers.length;e++)this.layers[e].visible=!1;heyzine.layers.popup.closeAll(!0)}},turned:function(e){null!=this.layers&&(this.showPageLayers(e),this.startTurnLayerActions(e),this.repositionEditLayers(e),heyzine.layers.popup.closeAll(!0)),this.lastPage=e,$.fitWidth("refitAll")},repositionEditLayers:function(e){if(this.isEditMode)for(let t=0;t<this.layers.length;t++){const i=this.layers[t];if(i.visible&&!this.singlePage||i.page==e&&this.singlePage){const n=$(".page-wrapper[page="+i.page+"]").get(0),o=$("#content");if(null==$(n).offset())return void setTimeout(()=>{this.repositionEditLayers(e)},600);this.layers[t].css.width=$(n).width()/i.wrapper.width*i.css.width,this.layers[t].css.height=$(n).height()/i.wrapper.height*i.css.height,this.layers[t].css.left=$(n).offset().left-o.offset().left+(i.css.left-i.wrapper.left)*($(n).width()/i.wrapper.width),this.layers[t].css.top=$(n).offset().top-o.offset().top+(i.css.top-i.wrapper.top)*($(n).height()/i.wrapper.height),this.layers[t].wrapper={width:$(n).width(),height:$(n).height(),left:$(n).offset().left-$(o).offset().left,top:$(n).offset().top-$(o).offset().top}}}},showPageLayers:function(e){for(let e=0;e<this.layers.length;e++)this.layers[e].visible=!1;for(let t=0;t<this.layers.length;t++)if(this.singlePage||1==e||e==this.config.num_pages&&this.config.num_pages%2==0?e==this.layers[t].page&&(this.layers[t].visible=!0):e!=this.config.num_pages&&e!=this.config.num_pages-1||this.config.num_pages%2==0?(e%2==0&&(e==this.layers[t].page||e+1==this.layers[t].page&&e+1!=this.config.num_pages)||e%2!=0&&(e==this.layers[t].page||e-1==this.layers[t].page&&e-1!=1))&&(this.layers[t].visible=!0):e!=this.layers[t].page&&e+1!=this.layers[t].page||(this.layers[t].visible=!0),this.layersDom[t]){this.layers[t].visible&&this.layers[t].action&&1==this.layers[t].action.highlight?this.layersDom[t].addClass("layer-action-highlight"):this.layersDom[t].removeClass("layer-action-highlight");const i=this.layers[t];if(i&&"video"==i.type){if("youtube"==i.media.type){const n=$(this.layersDom[t]).find("iframe");if(n.length>0){const t=n.attr("src")+"&cache="+(new Date).getTime();i.visible&&!this.singlePage||i.page==e&&this.singlePage?"1"==i.media.options.autoplay&&n.attr("src",t.replace("&autoplay=0","&autoplay=1")):n.attr("src",t.replace("&autoplay=1","&autoplay=0"))}}else if(null!=this.layersDom[t]){const n=$(this.layersDom[t]).find("video").get(0);null!=n&&(i.visible&&!this.singlePage||i.page==e&&this.singlePage?"1"==i.media.options.autoplay&&(n.pause(),n.currentTime=0,n.load(),n.play()):n.pause())}}else if(i&&"audio"==i.type){let n=this.layersComp[t];null!=n&&(i.visible&&!this.singlePage||i.page==e&&this.singlePage?"1"==i.media.options.autoplay&&(n.pause(),n.play()):1!=i.media.options.keep&&n.pause())}}},startTurnLayerActions:function(e){if(!this.isEditMode&&null!=this.layers)for(let t=0;t<this.layers.length;t++){let i=this.layers[t];"background"==i.type&&"audio"==i.media.type&&this.startTurnAudio(e,i,t)}},startTurnAudio:function(e,t,i){let n=i;this.layersComp[n]||(this.layersComp[n]=new Audio(t.media.url),this.layersComp[n].compType="backAudio",null!=t.media.options&&t.media.options.volume&&(this.layersComp[n].volume=t.media.options.volume/100),this.layersComp[n].addEventListener("play",e=>{t.media.played=!0}),null!=t.media.options&&t.media.options.loop&&this.layersComp[n].addEventListener("ended",e=>{null!=this.lastPage&&this.lastPage>=this.layers[n].page&&this.lastPage<=this.layers[n].page_end&&(this.layersComp[n].currentTime=0,this.layersComp[n].play())}));let o=e>=t.page&&e<=t.page_end,s=e<t.page||e>t.page_end,a=null!=this.lastPage&&this.lastPage>=t.page&&this.lastPage<=t.page_end;if((null==this.lastPage||this.lastPage<t.page||this.lastPage>t.page_end)&&o){if(null!=t.media.options&&t.media.options.once&&t.media.played)return;!1===this.soundEnabled&&(this.layersComp[n].muted=!this.soundEnabled),this.layersComp[n].currentTime=0,this.layersComp[n].play()}else a&&o?t.media.played||this.layersComp[n].play():s&&a&&(null!=t.media.options&&null!=t.media.options.keep&&!1!==t.media.options.keep||this.layersComp[n].pause())},resetLayersComp:function(){for(let e=0;e<this.layersComp.length;e++)this.layersComp[e]&&("audio"==this.layersComp[e].compType?this.layersComp[e].unload():"backAudio"==this.layersComp[e].compType&&this.layersComp[e].pause());this.layersComp.length=0},destroyViewportLayers:function(e){return new Promise((e,t)=>{e("")})},loadViewportLayers:function(e){return new Promise((e,t)=>{e("")})},loadPageLayers:function(e,t,i){if($(t).find(".layer-action-render").remove(),this.isEditMode||null==this.layers)return new Promise((e,t)=>{e("")});for(let i=0;i<this.layers.length;i++)if(e==this.layers[i].page){const e=$('<div class="layer-action-render" id="layer'+this.layers[i].id+'" style="position: absolute;" data-disable-events="start"></div>');if(e.appendTo(t).css({left:(this.layers[i].css.left-this.layers[i].wrapper.left+1)/this.layers[i].wrapper.width*100+"%",top:(this.layers[i].css.top-this.layers[i].wrapper.top+1)/this.layers[i].wrapper.height*100+"%",width:this.layers[i].css.width/this.layers[i].wrapper.width*100+"%",height:this.layers[i].css.height/this.layers[i].wrapper.height*100+"%"}),this.layersDom[i]=e,"picture"==this.layers[i].type)e.addClass("layer-action-pic"),null==this.layers[i].action.target&&e.css("cursor","auto"),e.append('<img src="'+this.layers[i].media.url+'" draggable="false" class="layer-pic" />');else if("video"==this.layers[i].type){const t=this.layers[i].media;if(e.addClass("layer-action-vid"),t.options&&"4"==t.options.controls&&e.addClass("layer-controls-disabled"),"youtube"==t.type)e.append('<iframe class="layer-vid" allow="autoplay" allowfullscreen src="'+t.url.replace("&autoplay=1","&autoplay=0")+'"></iframe>');else{let n=t.options&&"1"==t.options.autoplay&&1==this.layers[i].page;this.createVideoPlayer(e,t,{muted:t.options&&"1"==t.options.mute,autoplay:n})}}else if("web"==this.layers[i].type){e.addClass("layer-action-web");const t=this.layers[i].media;if(null!=t.url&&"null"!=t.url){let i="";1==t.options.noscroll&&(i='scrolling="no"'),e.append('<iframe class="layer-web" allowfullscreen '+i+' src="'+t.url+'"></iframe>')}}else if("audio"==this.layers[i].type){e.addClass("layer-action-audio"),e.addClass("layer-disable-page-drag");const t=this.layers[i].media;if(null!=t.url&&"null"!=t.url){let n=hzflip.player.createPlayer(e,{title:t.options.title,url:t.url,style:t.options.controls,autoplay:t.options.autoplay,color1:t.options.color1,color2:t.options.color2});n.compType="audio",this.layersComp[i]=n}}"zoom"==this.layers[i].action.type&&e.addClass("layer-zoom").addClass("layer-zoom-in"),this.loadLayerActions(e,this.layers[i],"#layer"+this.layers[i].id),1==this.layers[i].action.highlight&&setTimeout(()=>{e.addClass("layer-action-highlight")},1e3)}return heyzine.stats.trackIframes(this.layers),heyzine.stats.trackMedia(this.layers,this.layersComp,this.layersDom),$.fitWidth("refitAll"),new Promise((e,t)=>{e("")})},loadLayerActions:function(e,t,i){$("#magazineViewport").off("click",i).on("click",i,e=>{heyzine.layers.popup.closeAll(),"page"==t.action.type?(heyzine.goToPage(parseInt(t.action.target)),heyzine.stats.trackLayer("link-int",t)):"link"==t.action.type?""!=$.trim(t.action.target)&&(t.action.extra&&"1"==t.action.extra.new_tab?(window.open(t.action.target,"target=_BLANK"),heyzine.stats.trackLayer("link-ext",t)):heyzine.stats.trackLayer("link-ext",t,()=>{document.location.href=t.action.target})):"zoom"==t.action.type?(heyzine.setZoom("zoomLayer",t.id,{scale:t.action.target,zoomOut:t.action.extra.zoomOut}),heyzine.stats.trackLayer("zoom-layer",{action:{target:t.id},page:t.page})):"popup"==t.action.type&&heyzine.layers.popup.show(t,e)})},render:function(e,t){},soundToggle:function(e){if(this.soundEnabled=e,null!=this.layers){for(let e=0;e<this.layers.length;e++)if(this.layersDom[e]){const t=this.layers[e];if(t&&"video"==t.type)if("youtube"==t.media.type){const t=$(this.layersDom[e]).find("iframe"),i=t.attr("src");this.soundEnabled?t.attr("src",i.replace("&mute=1","&mute=0")):t.attr("src",i.replace("&mute=0","&mute=1"))}else{$(this.layersDom[e]).find("video").get(0).muted=!this.soundEnabled}else if(t&&"audio"==t.type){const t=this.layersComp[e];null!=t&&t.mute(!this.soundEnabled)}}for(let e=0;e<this.layersComp.length;e++)this.layersComp[e]&&(null==this.soundEnabled?this.layersComp[e].muted=!1:this.layersComp[e].muted=!this.soundEnabled)}},createVideoPlayer:function(e,t,i){if($(e).append('<video playsinline class="layer-vid" '+(t.options&&"1"==t.options.controls?"controls ":'onclick="this.paused ? this.play() : this.pause();" ')+(i.muted?"muted ":"")+(i.autoplay?"autoplay ":"")+(t.options&&t.options.loop?"loop ":"")+'> <source src="'+t.url+'" type="video/mp4"></video>'),t.options&&("2"==t.options.controls||"3"==t.options.controls)){let i='<div class="layer-vid-controls-min" data-options="'+t.options.controls+'">';"2"==t.options.controls&&(i+='<div class="layer-vid-playpause"><svg class="layer-vid-play" fill="white" width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.90588 4.53682C6.50592 4.2998 6 4.58808 6 5.05299V18.947C6 19.4119 6.50592 19.7002 6.90588 19.4632L18.629 12.5162C19.0211 12.2838 19.0211 11.7162 18.629 11.4838L6.90588 4.53682Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/></svg><svg class="layer-vid-pause" style="display: none;" fill="white" width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 18.4V5.6C6 5.26863 6.26863 5 6.6 5H9.4C9.73137 5 10 5.26863 10 5.6V18.4C10 18.7314 9.73137 19 9.4 19H6.6C6.26863 19 6 18.7314 6 18.4Z" stroke="currentColor" stroke-width="1.5"/><path d="M14 18.4V5.6C14 5.26863 14.2686 5 14.6 5H17.4C17.7314 5 18 5.26863 18 5.6V18.4C18 18.7314 17.7314 19 17.4 19H14.6C14.2686 19 14 18.7314 14 18.4Z" stroke="currentColor" stroke-width="1.5"/></svg></div>'),i+='<div class="layer-vid-fullscreen"><svg class="layer-vid-fullscreen-btn" fill="white" width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.5 16H4C2.89543 16 2 15.1046 2 14V6C2 4.89543 2.89543 4 4 4H15C16.1046 4 17 4.89543 17 6V9" stroke="currentColor" stroke-width="1.5"/><path d="M7 19V11C7 9.89543 7.89543 9 9 9H20C21.1046 9 22 9.89543 22 11V19C22 20.1046 21.1046 21 20 21H9C7.89543 21 7 20.1046 7 19Z" stroke="currentColor" stroke-width="1.5"/><path d="M10 12H11" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M5 7H6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div>',$(e).append(i);let n=$(e).find("video").get(0);$(e).find(".layer-vid-controls-min").on("mouseenter",(function(){n.paused||n.ended?($(e).find(".layer-vid-play").show(),$(e).find(".layer-vid-pause").hide()):($(e).find(".layer-vid-play").hide(),$(e).find(".layer-vid-pause").show())})),$(e).find(".layer-vid-playpause").on("click",(function(){n.paused||n.ended?(n.play(),$(e).find(".layer-vid-play").hide(),$(e).find(".layer-vid-pause").show()):(n.pause(),$(e).find(".layer-vid-play").show(),$(e).find(".layer-vid-pause").hide())})),$(e).find(".layer-vid-fullscreen").on("click",(function(){document.fullscreenElement?(document.exitFullscreen(),t.options&&"1"==t.options.controls||(n.controls=!1)):document.webkitFullscreenElement?(document.webkitExitFullscreen(),t.options&&"1"==t.options.controls||(n.controls=!1)):n.webkitRequestFullscreen?(n.controls=!0,n.webkitRequestFullscreen()):(n.controls=!0,n.requestFullscreen())}))}return $(e).find("video").get(0)}},"undefined"==typeof hzflip&&(hzflip={}),hzflip.player={createPlayer:function(e,t){let i=this.getTemplateDefault(e,t),n=$(i).appendTo(e),o=n.find(".track > span"),s=n.find(".timer > span"),a=n.find(".duration > span"),l=n.find(".pauseBtn"),r=n.find(".playBtn"),h=n.find(".volumeOn"),d=n.find(".volumeOff"),c=n.find(".loading"),p=n.find(".progress"),g=n.find(".seeker");this.setStyle(e,t);var u=function(e){this.song=e,void 0===this.song.howl&&(this.song.howl=null),o.innerHTML=e.title,$(o).attr("title",e.title)};u.prototype={seekerDown:!1,lastSeekPos:null,load:function(){$(c).show();let e=this,t=this.song,i=t.howl;i||(i=t.howl=new Howl({src:[t.url],html5:!0,onplay:function(){$(a).html(e.formatTime(Math.round(i.duration()))),requestAnimationFrame(e.step.bind(e)),$(r).hide(),$(l).show(),e.waveAnim("start"),$(e).trigger("player:play")},onload:function(){$(c).hide(),$(a).html(e.formatTime(Math.round(i.duration()))),$(o).html(t.title),$(o).attr("title",t.title)},onend:function(){},onpause:function(){},onstop:function(){},onseek:function(){requestAnimationFrame(e.step.bind(e))}}))},unload:function(){this.song.howl.unload()},play:function(){const e=this.song.howl;e.play(),"loaded"===e.state()?($(r).hide(),$(l).show(),this.waveAnim("start")):($(r).hide(),$(l).hide(),this.waveAnim("stop"))},pause:function(){this.song.howl.pause(),$(r).show(),$(l).hide(),this.waveAnim("stop")},volume:function(e){Howler.volume(e)},mute:function(e){this.song.howl.mute(e)},seek:function(e){const t=this.song.howl;t&&t.seek(t.duration()*e)},seekView:function(e){const t=this;if(t.song.howl){let i=t.song.howl.duration();$(s).html(f.formatTime(Math.round(e*i))),$(p).css("width",Math.round(e*$(g).width()||0)+"px")}},step:function(){const e=this,t=e.song.howl;let i=t.seek()||0;i>0&&($(s).html(e.formatTime(Math.round(i))),$(p).css("width",Math.round(i/t.duration()*$(g).width()||0)+"px")),t.playing()&&requestAnimationFrame(e.step.bind(e))},formatTime:function(e){let t=Math.floor(e/60)||0,i=e-60*t||0;return t+":"+(i<10?"0":"")+i},waveAnim:function(e){"wave"!=this.song.style?"ocean"!=this.song.style||("start"==e?$(n).removeClass("paused"):"stop"==e&&$(n).addClass("paused")):"load"==e?this.siriWave=new SiriWave({container:$(n).find(".theme-siri").get(0),style:"ios",cover:!0,autostart:!1,color:this.formatColor(this.song.color2)||"#fff"}):"start"==e?(null==this.siriWave&&this.waveAnim("load"),this.siriWave.start()):"stop"==e&&null!=this.siriWave&&this.siriWave.stop()},formatColor:function(e){if(null==e)return null;var t,i=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");function n(e){return isNaN(e)?"00":i[(e-e%16)/16]+i[e%16]}return"#"+n((t=(t=e).match(/^rgba\((\d+),\s*(\d+),\s*(\d+)\,\s*(\d+)\)$/))[1])+n(t[2])+n(t[3])}};let f=new u(t);return f.load(),$(document).off("click","#"+$(e).attr("id")+" .playBtn"),$(document).on("click","#"+$(e).attr("id")+" .playBtn",(function(){f.play()})),$(document).off("click","#"+$(e).attr("id")+" .pauseBtn"),$(document).on("click","#"+$(e).attr("id")+" .pauseBtn",(function(){f.pause()})),$(document).off("click","#"+$(e).attr("id")+" .volumeOn"),$(document).on("click","#"+$(e).attr("id")+" .volumeOn",(function(){$(this).hide(),$(d).show(),f.mute(!0)})),$(document).off("click","#"+$(e).attr("id")+" .volumeOff"),$(document).on("click","#"+$(e).attr("id")+" .volumeOff",(function(){$(this).hide(),$(h).show(),f.mute(!1)})),$(document).off("mousedown touchstart","#"+$(e).attr("id")+" .seeker"),$(document).on("mousedown touchstart","#"+$(e).attr("id")+" .seeker",(function(){f.seekerDown=!0})),$(document).off("mousemove touchmove","#"+$(e).attr("id")+" .seeker"),$(document).on("mousemove touchmove","#"+$(e).attr("id")+" .seeker",(function(e){if(0===e.originalEvent.buttons&&(f.seekerDown=!1),f.seekerDown){let t=null!=e.clientX?e.clientX:e.changedTouches.length>0?e.changedTouches[0].clientX:0;if(0==t)return;let i=Math.round((t-$(g).offset().left)/($(g).width()*heyzine.getZoomScale())*1e4)/1e4;f.seekView(i),(null==f.lastSeekPos||Math.abs(f.lastSeekPos-i)>.01)&&(f.seek(i),f.lastSeekPos=i)}})),$(document).off("mouseup touchend click","#"+$(e).attr("id")+" .seeker"),$(document).on("mouseup touchend click","#"+$(e).attr("id")+" .seeker",(function(e){let t=null!=e.clientX?e.clientX:e.changedTouches.length>0?e.changedTouches[0].clientX:0;if(0==t)return;f.seekerDown=!1;let i=Math.round((t-$(g).offset().left)/($(g).width()*heyzine.getZoomScale())*1e4)/1e4;f.seekView(i),f.seek(i),f.lastSeekPos=i})),$(document).off("hz.endresize","#"+$(e).attr("id")),$(document).on("hz.endresize","#"+$(e).attr("id"),(function(){$(e).find("[data-fit-text]").each((function(e,t){$.fitWidth("refit",t)}))})),"none"==t.style&&($(document).off("click","#"+$(e).attr("id")),$(document).on("click","#"+$(e).attr("id"),(function(){f.song.howl.playing()?f.pause():f.play()})),$(document).off("dblclick","#"+$(e).attr("id")),$(document).on("dblclick","#"+$(e).attr("id"),(function(){return f.song.howl.stop(),f.play(),!1}))),f},getTemplateDefault:function(e,t){let i=t.style;if("none"==i)return $(e).addClass("layer-player-none"),'<div class="layer-player paused" data-disable-zoom="true"></div>';if("btn"==i)return $(e).addClass("layer-player-btn"),'<div class="layer-player paused"><div class="controlsOuter"><div class="controlsInner"><div class="loading"></div><svg class="btn-player playBtn" fill="currentColor" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 30 30" width="30px" height="30px">    <path d="M 6 3 A 1 1 0 0 0 5 4 A 1 1 0 0 0 5 4.0039062 L 5 15 L 5 25.996094 A 1 1 0 0 0 5 26 A 1 1 0 0 0 6 27 A 1 1 0 0 0 6.5800781 26.8125 L 6.5820312 26.814453 L 26.416016 15.908203 A 1 1 0 0 0 27 15 A 1 1 0 0 0 26.388672 14.078125 L 6.5820312 3.1855469 L 6.5800781 3.1855469 A 1 1 0 0 0 6 3 z"/></svg><svg class="btn-player pauseBtn" fill="currentColor" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 30 30" width="30px" height="30px">    <path d="M 8 4 C 6.895 4 6 4.895 6 6 L 6 24 C 6 25.105 6.895 26 8 26 L 10 26 C 11.105 26 12 25.105 12 24 L 12 6 C 12 4.895 11.105 4 10 4 L 8 4 z M 20 4 C 18.895 4 18 4.895 18 6 L 18 24 C 18 25.105 18.895 26 20 26 L 22 26 C 23.105 26 24 25.105 24 24 L 24 6 C 24 4.895 23.105 4 22 4 L 20 4 z"/></svg></div></div>';let n='<div class="layer-player paused">';return n+='<div class="title">',n+='<div class="controlsAlt">',n+='<svg class="btn-player playBtn" fill="currentColor" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 30 30" width="30px" height="30px">    <path d="M 6 3 A 1 1 0 0 0 5 4 A 1 1 0 0 0 5 4.0039062 L 5 15 L 5 25.996094 A 1 1 0 0 0 5 26 A 1 1 0 0 0 6 27 A 1 1 0 0 0 6.5800781 26.8125 L 6.5820312 26.814453 L 26.416016 15.908203 A 1 1 0 0 0 27 15 A 1 1 0 0 0 26.388672 14.078125 L 6.5820312 3.1855469 L 6.5800781 3.1855469 A 1 1 0 0 0 6 3 z"/></svg>',n+='<svg class="btn-player pauseBtn" fill="currentColor" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 30 30" width="30px" height="30px">    <path d="M 8 4 C 6.895 4 6 4.895 6 6 L 6 24 C 6 25.105 6.895 26 8 26 L 10 26 C 11.105 26 12 25.105 12 24 L 12 6 C 12 4.895 11.105 4 10 4 L 8 4 z M 20 4 C 18.895 4 18 4.895 18 6 L 18 24 C 18 25.105 18.895 26 20 26 L 22 26 C 23.105 26 24 25.105 24 24 L 24 6 C 24 4.895 23.105 4 22 4 L 20 4 z"/></svg>',n+="</div>",n+='<div class="timer"><span data-fit-text>0:00</span></div>',n+='<div class="track"><span data-fit-text></span></div>',n+='<div class="duration"><span data-fit-text>0:00</span></div>',n+="</div>","ocean"==i?n+='<div class="theme-player theme-ocean"><div class="theme-back-cont"><div class="wave"></div><div class="wave"></div></div></div>':"wave"==i?n+='<div class="theme-siri"></div>':"min"==i&&($(e).addClass("layer-player-min"),n+="<div></div>"),n+='<div class="seeker"></div>',n+='<div class="controlsOuter">',n+='<div class="controlsInner">',n+='<div class="loading"></div>',n+='<svg class="btn-player playBtn" fill="currentColor" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 30 30" width="30px" height="30px">    <path d="M 6 3 A 1 1 0 0 0 5 4 A 1 1 0 0 0 5 4.0039062 L 5 15 L 5 25.996094 A 1 1 0 0 0 5 26 A 1 1 0 0 0 6 27 A 1 1 0 0 0 6.5800781 26.8125 L 6.5820312 26.814453 L 26.416016 15.908203 A 1 1 0 0 0 27 15 A 1 1 0 0 0 26.388672 14.078125 L 6.5820312 3.1855469 L 6.5800781 3.1855469 A 1 1 0 0 0 6 3 z"/></svg>',n+='<svg class="btn-player pauseBtn" fill="currentColor" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 30 30" width="30px" height="30px">    <path d="M 8 4 C 6.895 4 6 4.895 6 6 L 6 24 C 6 25.105 6.895 26 8 26 L 10 26 C 11.105 26 12 25.105 12 24 L 12 6 C 12 4.895 11.105 4 10 4 L 8 4 z M 20 4 C 18.895 4 18 4.895 18 6 L 18 24 C 18 25.105 18.895 26 20 26 L 22 26 C 23.105 26 24 25.105 24 24 L 24 6 C 24 4.895 23.105 4 22 4 L 20 4 z"/></svg>',n+="</div>",n+='<svg class="btn-player volumeBtn volumeOn" fill="currentColor" xmlns="http://www.w3.org/2000/svg"  viewBox="1 1 21 21" width="24px" height="24px">    <path d="M 10.294922 3.9882812 C 10.122922 3.9882812 9.9476875 4.0533125 9.8046875 4.1953125 L 5 9 L 3 9 C 1.895 9 1 9.895 1 11 L 1 13 C 1 14.105 1.895 15 3 15 L 5 15 L 9.8046875 19.804688 C 9.9476875 19.947688 10.122922 20.011719 10.294922 20.011719 C 10.654922 20.011719 11 19.732547 11 19.310547 L 11 4.6894531 C 11 4.2674531 10.654922 3.9882812 10.294922 3.9882812 z M 15.939453 6.0390625 A 1.0001 1.0001 0 0 0 15.242188 7.7578125 C 17.594098 10.109723 17.593888 13.891346 15.242188 16.242188 A 1.0001 1.0001 0 1 0 16.65625 17.65625 C 19.772549 14.541091 19.772339 9.4598394 16.65625 6.34375 A 1.0001 1.0001 0 0 0 15.939453 6.0390625 z M 13.111328 8.8691406 A 1.0001 1.0001 0 0 0 12.414062 10.585938 C 13.204152 11.376027 13.204152 12.623974 12.414062 13.414062 A 1.0005843 1.0005843 0 1 0 13.828125 14.830078 C 15.382035 13.276168 15.382035 10.725785 13.828125 9.171875 A 1.0001 1.0001 0 0 0 13.111328 8.8691406 z"/></svg>',n+='<svg class="btn-player volumeBtn volumeOff" style="display: none;" viewBox="2 1 21 21" fill="currentColor" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px"><path d="M 11.294922 3.9882812 C 11.122922 3.9882812 10.947687 4.0533125 10.804688 4.1953125 L 6 9 L 4 9 C 2.895 9 2 9.895 2 11 L 2 13 C 2 14.105 2.895 15 4 15 L 6 15 L 10.804688 19.804688 C 10.947688 19.947688 11.122922 20.011719 11.294922 20.011719 C 11.654922 20.011719 12 19.732547 12 19.310547 L 12 4.6894531 C 12 4.2674531 11.654922 3.9882812 11.294922 3.9882812 z M 14.990234 7.9902344 A 1.0001 1.0001 0 0 0 14.292969 9.7070312 L 16.585938 12 L 14.292969 14.292969 A 1.0001 1.0001 0 1 0 15.707031 15.707031 L 18 13.414062 L 20.292969 15.707031 A 1.0001 1.0001 0 1 0 21.707031 14.292969 L 19.414062 12 L 21.707031 9.7070312 A 1.0001 1.0001 0 0 0 20.980469 7.9902344 A 1.0001 1.0001 0 0 0 20.292969 8.2929688 L 18 10.585938 L 15.707031 8.2929688 A 1.0001 1.0001 0 0 0 14.990234 7.9902344 z"/></svg>',n+="</div>",n+='<div class="progress"></div>',n+="</div>",n},setStyle:function(e,t){t.color1&&($(e).css("background-color",t.color1),$(e).find(".title").css("background-color",t.color1),$(e).find(".controlsOuter").css("background-color",t.color1)),t.color2&&($(e).find(".title").css("color",t.color2),$(e).find(".btn-player").css("color",t.color2)),$.fitWidth()}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.layers&&(hzflip.layers={}),hzflip.layers.text={page:0,css:{left:0,right:0,top:0,bottom:0,width:"200px",height:"100px",zIndex:100},content:"text",target:"page",layer:null,render:function(e,t,i){null!=this.layer&&this.layer.remove(),this.layer=$('<div class="layer-text"></div>'),this.layer.append(this.content),this.layer.css(this.css),t.append(this.layer)},renderViewport:function(e){const t=$('<div class="layer-text"></div>');t.append(this.content),t.css(this.css),e.append(t)},destroyViewport:function(){null!=this.layer&&this.layer.remove()}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.layers&&(hzflip.layers={}),hzflip.layers.popup={show:function(e,t){if("tooltip"==e.action.extra.inline){this.createTooltip(e).fadeIn("fast")}else{this.createModal(e).fadeIn("fast")}null!=t&&(t.preventDefault(),t.stopPropagation())},closeAll:function(e){heyzine.layers.isEditMode&&!e||$(".layer-popup").each((function(){$(this).fadeOut("fast",()=>{$(this).remove()})}))},createTooltip:function(e){const t=heyzine.layers.isEditMode,i=$('<div class="layer-popup">'),n=$('<div class="layer-popup-content">');let o=t?$("#"+e.id):$("#layer"+e.id);$("#magazineViewport").one("click",e=>{this.closeAll()}),document.documentElement.style.setProperty("--popup-color",$("#pnlControls").css("background-color"));let s="45%";i.appendTo($("#canvas")),s=Math.round(45*$(".page-wrapper[page="+e.page+"]").width()/100)+"px",i.addClass("layer-popup-float").removeClass("layer-popup-float-bottom");let a=o.get(0).style.left;return t||(a=Math.round($(o).offset().left-$("#canvas").offset().left)+"px"),i.css({width:s,height:"auto",left:a,top:o.get(0).style.top,bottom:"auto"}),n.appendTo(i),this.setPositionFloat(i,o),this.createContent(e).then(e=>{e.appendTo(n),this.setPositionFloat(i,o)}).catch(e=>{console.log(e)}),i},createModal:function(e){heyzine.layers.isEditMode;const t=$('<div class="layer-popup">'),i=$('<div class="layer-popup-content">');return t.css("background-color",$("#pnlControls").css("background-color")),t.appendTo("#canvas"),i.appendTo(t),t.on("click",(function(e){const i=$(".layer-popup-video");i.is(e.target)||0!==i.has(e.target).length||t.fadeOut("fast",(function(){t.remove()})),e.preventDefault(),e.stopPropagation()})),t.on("mousemove",(function(e){e.preventDefault(),e.stopPropagation()})),this.createContent(e).then(n=>{this.createCloseButton(e,n,i),n.appendTo(i),this.setPositionModal(t)}).catch(e=>{console.log(e)}),t},createContent:function(e){return new Promise((t,i)=>{let n=null;if("picture"==e.action.subtype)n=$('<img src="'+e.action.target+'" class="layer-popup-picture" />'),$(n).on("load",()=>{t(n)});else if("web"==e.action.subtype){let i=1==e.action.extra.noscroll?'scrolling="no"':"";n=$('<iframe class="layer-popup-web" allowfullscreen '+i+' src="'+e.action.target+'"></iframe>'),t(n)}else if("video"==e.action.subtype){n=$('<div class="layer-popup-video">'),e.action.extra&&"4"==e.action.extra.controls&&n.addClass("layer-controls-disabled");const i=heyzine.layers.createVideoPlayer(n,{url:e.action.target,options:e.action.extra},{muted:e.action.extra&&"1"==e.action.extra.mute,autoplay:!1});$(i).on("loadedmetadata",(function(){e.action.extra&&"1"==e.action.extra.autoplay&&this.play(),t(n)}))}else"youtube"==e.action.subtype?(n=$('<div class="layer-popup-video">'),e.action.extra&&"4"==e.action.extra.controls&&n.addClass("layer-controls-disabled"),n.append('<iframe class="layer-vid" allow="autoplay" allowfullscreen src="'+e.action.target+'"></iframe>'),t(n)):i()})},createCloseButton:function(e,t,i){"youtube"==e.action.subtype||"video"==e.action.subtype?setTimeout(()=>{const e=$('<svg class="layer-popup-close" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 30 30" style=" fill:#fff;"><path d="M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"></path></svg>');e.css({fill:$("#pnlControls").css("background-color"),left:$(t).offset().left-$("#canvas").offset().left+$(t).width()-22,top:$(t).offset().top-$("#canvas").offset().top-20-11}),e.appendTo(i)},100):$(t).on("load",(function(){const e=$('<svg class="layer-popup-close" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 30 30" style=" fill:#fff;"><path d="M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"></path></svg>');e.css({fill:$("#pnlControls").css("background-color"),left:$(t).offset().left-$("#canvas").offset().left+$(t).width()-22,top:$(t).offset().top-$("#canvas").offset().top-20-11}),e.appendTo(i)}))},setPositionFloat:function(e,t){e.css({"margin-left":t.width()/2-$(e).width()/2,"margin-top":Math.round(-$(e).height()-25)+"px"}),e.offset().top<$("#magazineViewport").offset().top&&(e.css({"margin-top":t.height()+15}),e.addClass("layer-popup-float-bottom"))},setPositionModal:function(e){if(0==$(e).find(".layer-popup-video").length||0==$(e).find("video").length)return;let t=$(".layer-popup-content").width(),i=$(".layer-popup-content").height();const n={width:$(e).find("video").get(0).videoWidth,height:$(e).find("video").get(0).videoHeight,boundWidth:t,boundHeight:i},o={width:n.width,height:n.height};if(o.width>n.boundWidth||o.height>n.boundHeight){var s=o.width/o.height;n.boundWidth/s>n.boundHeight&&n.boundHeight*s<=n.boundWidth?(o.width=Math.round(n.boundHeight*s),o.height=n.boundHeight):(o.width=n.boundWidth,o.height=Math.round(n.boundWidth/s))}$(e).find(".layer-popup-video").css({width:o.width,height:o.height})}},hzpdf={pdfjsLib:null,pdf:null,renderQueue:[],loadingPages:[],renderTasks:[],fixedAspectRation:!1,load:(e,t)=>(heyzine.config=t,new Promise((t,i)=>{heyzine.pdfjsLib=window["pdfjs-dist/build/pdf"],heyzine.pdfjsLib.GlobalWorkerOptions.workerSrc=PDFJS_WORKER;let n={url:e,cMapUrl:PDFJS_CMAP_URL,cMapPacked:!0};if(heyzine.config.size>15e6){let t=2*Math.ceil(heyzine.config.size/heyzine.config.num_pages/2);t<1048576&&(t=1048576),n={url:e,disableStream:!0,disableAutoFetch:!0,rangeChunkSize:t,cMapUrl:PDFJS_CMAP_URL,cMapPacked:!0}}var o=heyzine.pdfjsLib.getDocument(n);"undefined"!=typeof hzp&&(o.onProgress=function(e){0==hzp.val&&null!=e.total&&e.total>0&&(console.log("checked"),hzp.check(heyzine.config.width,heyzine.config.height,heyzine.config.num_pages,e.total,heyzine.config.id))}),o.promise.then(e=>{heyzine.pdf=e,t(this.pdf)},e=>{i(e)})})),processRenderQueue:function(e,t,i,n){this.renderQueue.length>0?(this.renderQueue.push({numPage:e,page:t,renderContext:i,resolve:n}),this.sortRenderQueue()):(this.renderQueue.push({numPage:e,page:t,renderContext:i,resolve:n}),this.processRender(e,t,i,n))},processRender:function(e,t,i,n){console.log(Math.round((new Date).getTime()/1e3)+" startrender "+e),heyzine.progressBar("progress",{inc:10,abs:40});var o=t.render(i);o.onContinue=function(e){e()},this.renderTasks.push(o),o.promise.then(()=>{this.renderQueue=this.renderQueue.filter(e=>e.resolve!=n),console.log(Math.round((new Date).getTime()/1e3)+" endrender "+e),heyzine.progressBar("progress",{inc:10,abs:50}),n(i),this.renderQueue.length>0&&(this.sortRenderQueue(),this.processRender(this.renderQueue[0].numPage,this.renderQueue[0].page,this.renderQueue[0].renderContext,this.renderQueue[0].resolve))}).catch(()=>{console.log("render canceled")})},resetRender:function(){console.log("reset render");for(let e=0;e<this.renderTasks.length;e++)this.renderTasks[e].cancel();this.renderTasks.length=0,this.renderQueue.length>0&&(this.sortRenderQueue(),this.processRender(this.renderQueue[0].numPage,this.renderQueue[0].page,this.renderQueue[0].renderContext,this.renderQueue[0].resolve))},sortRenderQueue:function(){this.renderQueue.sort((e,t)=>{const i=heyzine.getCurrentPage()-1;return e.numPage<i&&t.numPage<i||e.numPage>i&&t.numPage>i?e.numPage-t.numPage:e.numPage>=i&&t.numPage<i?-1:e.numPage<i&&t.numPage>=i?1:e.numPage-t.numPage})},turn:function(e,t,i){this.loadPage(e,t),this.loadPage(e+1,i)},loadPageView:function(e,t,i){heyzine.config;const n=$("<canvas>");return new Promise((o,s)=>{this.loadingPages.filter(t=>t.page==e&&t.size==i).length>0?s():(this.loadingPages.push({page:e,size:i}),this.loadPageUrl(e,n,i).then(n=>{if(heyzine.helpers.loading.hide(t),$(t).find(".page-img-content").length<=0){let i=new Image;i.src=n,i.style="width: 100%; height: 100%; object-fit: contain;",$(i).addClass("page-img-content"),$(i).attr("draggable",!1),$(i).appendTo(t),heyzine.coverPagesClass(i,e)}else $(t).find(".page-img-content").attr("src",n);this.loadingPages=this.loadingPages.filter(t=>!(t.page==e&&t.size==i)),o(t)}))})},loadPageUrl:function(e,t,i){return new Promise((n,o)=>{heyzine.progressBar("progress",{inc:10,abs:10});let s=heyzine.getDesiredCanvasSize(i),a=heyzine.getPageCache(e,i,s);null==a?heyzine.loadPage(e,t.get(0),i).then(o=>{let s=o.canvasContext.canvas.width;heyzine.progressBar("progress",{inc:20,abs:70}),$(t).get(0).toBlob((function(t){heyzine.progressBar("progress",{inc:15,abs:85});let o=URL.createObjectURL(t);heyzine.setPageCache(e,i,s,o),n(o)}))}):n(a)})},loadViewport:function(e,t,i){const n=null==i?"normal":i,o=parseInt(t),s=heyzine.getDesiredCanvasSize(n);if(null!=heyzine.viewportScales[o]&&null!=heyzine.viewportScales[o][s])return heyzine.viewportScales[o][s];let a=e.getViewport({scale:1}),l=s/a.width;if(scaler.isIos()&&a.width*l*a.height*l>16777215){l=Math.sqrt(16777215/(a.height/a.width))/a.width,a=e.getViewport({scale:l})}else a=e.getViewport({scale:l});return null==heyzine.viewportScales[o]&&(heyzine.viewportScales[o]=[]),heyzine.viewportScales[o][s]=a,a},loadPage:function(e,t,i){let n=this;return new Promise((o,s)=>{console.log(Math.round((new Date).getTime()/1e3)+" loadpage "+e),heyzine.pdf.getPage(e).then((function(s){console.log(Math.round((new Date).getTime()/1e3)+" loadpage end "+e),heyzine.progressBar("progress",{inc:20,abs:30});let a=n.loadViewport(s,e,i);var l=t.getContext("2d",{willReadFrequently:!0});a.width-Math.trunc(a.width)>.9999||a.height-Math.trunc(a.height)>.9999?(t.height=Math.round(a.height),t.width=Math.round(a.width)):(t.height=Math.trunc(a.height),t.width=Math.trunc(a.width)),n.fixedAspectRatio||(heyzine.renderAspectRatio=a.height/a.width,heyzine.resizeViewport(),n.fixedAspectRatio=!0);var r={canvasContext:l,viewport:a,loadingPage:e};heyzine.processRenderQueue(e,s,r,o)})).catch(e=>{console.log(e),s(e)})})},loadImage:(e,t)=>new Promise((t,i)=>{function n(){heyzine.config.toc=!1;const n=$("<canvas>");heyzine.loadPage(e,n.get(0),253.6).then(()=>{var e=new Image;e.src=n.get(0).toDataURL(),e.style="height: 100%;",e.onload=()=>{t(e)},e.onerror=()=>{i(e)}})}if(!1===heyzine.config.toc||null==heyzine.toc)return void n();const o=new Image;o.onload=function(){const i=130/o.naturalHeight*400;o.style="width: "+i+"px; object-position:-"+i*(e-1)+"px",heyzine.config.toc=!0,t(o)},o.onerror=function(){n()},o.src=heyzine.toc.src}),loadPageThumbnails:(e,t,i)=>new Promise((n,o)=>{var s=null==t?"full":"left";heyzine.loadImage(e,s).then(e=>{null!=t?heyzine.loadImage(t,"right").then(t=>{$(i).html(""),$(e).appendTo(i),$(t).appendTo(i),n()}):($(i).html(""),$(e).appendTo(i),n())})}),getDesiredCanvasSize:e=>{let t=$(".page-wrapper").width();0==t&&(t=$(document).width()/2>300?$(document).width()/2:300);let i=t;return i<=800&&(i=3*t),void 0!==e&&(i="large"==e?3*t*window.devicePixelRatio:"xlarge"==e?6*t*window.devicePixelRatio:"normal"==e?t*window.devicePixelRatio:"small"==e?t/1.5*window.devicePixelRatio:e),i=Math.trunc(i),i}},hzimg={pictures:[],walls:[],load:(e,t)=>(heyzine.config=t,new Promise((t,i)=>{$.getJSON(e,(function(e){heyzine.pictures=e,t("")}))})),loadPageView:(e,t,i)=>{heyzine.config;heyzine.helpers.loading.hide(t),$(t).html("");const n=$('<div class="hz-grid" id="hz-grid-'+e+'"></div>');for(let e=0;e<heyzine.pictures.length;e++)e<2?n.append('<div class="hz-grid-item" style="width: 160px;"><img src="'+heyzine.pictures[e].url+'" /></div>'):n.append('<div class="hz-grid-item" style="width: 80px;"><img src="'+heyzine.pictures[e].url+'" /></div>');n.appendTo(t);var o=new Freewall(n);return o.reset({selector:".hz-grid-item",animate:!1,draggable:!1,cellW:80,cellH:"auto",onResize:function(){o.fitZone(300,450)}}),heyzine.walls.push(o),o.fitZone(300,450),o.container.find("img").load((function(){o.fitZone(300,450)})),heyzine.coverPagesClass(t,e),new Promise((e,t)=>{e("")})},loadPageThumbnails:(e,t,i)=>{}},hzprev={pictureUrl:null,load:function(e,t){return heyzine.config=t,this.pictureUrl=e,new Promise((e,t)=>{e()})},loadPageView:function(e,t,i){return new Promise((i,n)=>{heyzine.helpers.loading.hide(t);var o=new Image;o.src=this.pictureUrl,o.style="width: 100%;",o.alt="Flipbook cover",$(o).appendTo(t),$(t).closest(".page-wrapper").css("box-shadow","0 0 20px 2px lightgray"),heyzine.coverPagesClass(o,e),i(t)})},loadPageThumbnails:(e,t,i)=>{},resizeViewport:()=>{}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.helpers&&(hzflip.helpers={}),hzflip.helpers.loading={show:(e,t,i)=>{const n='<div class="loader loader-1-circle">   <div class="loader-1-circle1 loader-1-child"></div>      <div class="loader-1-circle2 loader-1-child"></div>      <div class="loader-1-circle3 loader-1-child"></div>      <div class="loader-1-circle4 loader-1-child"></div>      <div class="loader-1-circle5 loader-1-child"></div>      <div class="loader-1-circle6 loader-1-child"></div>      <div class="loader-1-circle7 loader-1-child"></div>      <div class="loader-1-circle8 loader-1-child"></div>      <div class="loader-1-circle9 loader-1-child"></div>      <div class="loader-1-circle10 loader-1-child"></div>     <div class="loader-1-circle11 loader-1-child"></div>     <div class="loader-1-circle12 loader-1-child"></div>   </div> ';if(null==e||null==t)return $(".page-wrapper .page").append('<div class="gradient"></div>'+n),void $(".page-wrapper img").css("opacity","0.5");if("crisp"==e&&null!=t){t.html('<div class="gradient"></div>'),t.append('<div class="loader-preview-cont"></div>');const e=t.find(".loader-preview-cont");return e.append(heyzine.thumbnail),e.append(n),void t.find(".loader-preview").addClass("loader-preview-effect-done").attr("draggable","false")}if("blur"==e&&null!=t)if(null!=heyzine.toc){const e=new Image;e.src=null==i?heyzine.thumbnail.src:heyzine.toc.src,e.classList.add("loader-preview"),e.classList.add("no-drag"),t.html('<div class="gradient"></div>'),t.append('<div class="loader-preview-cont"></div>');const o=t.find(".loader-preview-cont");if(o.append(e),o.append(n),null!=i){const e=100/(heyzine.config.num_pages-1)*(i-1);t.find(".loader-preview").attr("draggable","false").css("object-position",e+"%")}}else t.html('<div class="gradient">'+n+"</div>")},hide:function(e){return new Promise((t,i)=>{null==e?$("#magazineViewport").find(".loader").remove():e.find(".loader").remove(),heyzine.thumbnail&&$(heyzine.thumbnail).css("opacity",1);const n=$(e).find(".loader-preview-cont");n.length>0?(n.find(".loader-preview").addClass("loader-preview-effect-done"),setTimeout(()=>{n.remove(),t()},200)):t()})},startEffect:function(e,t){let i=e,n="loader-preview-effect";null==e&&(i=heyzine.getVisiblePagesElements()),"appear"==t&&(n="loader-preview-effect2");for(let e=0;e<i.length;e++)$(i[e]).find(".loader-preview").hasClass(n)||($(i[e]).find(".loader-preview").addClass(n),setTimeout(()=>{$(i[e]).find(".loader-preview").css({filter:"blur(1px)",opacity:"1"})},5e3))},showViewportLoader:function(){let e=heyzine.getBound();this.show("blur",$(".magazine-viewport-loader")),this.startEffect([".magazine-viewport-loader"],"appear"),"width"==e.fit?(e.isSingle?$(".loader-preview").css({width:"100%",height:"auto","object-fit":"contain"}):$(".loader-preview").css({width:"50%",height:"auto","object-fit":"contain"}),$(".magazine-viewport-loader").fadeIn("fast")):($(".loader-preview").css({width:"auto",height:"100%","object-fit":"contain"}),$(".magazine-viewport-loader").fadeIn("fast"))}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.viewers&&(hzflip.viewers={}),hzflip.viewers.magazine={config:{},design:{},isZoomedIn:!1,isEditMode:!1,loadedPages:[],duration:1e3,prevPage:0,render:(e,t)=>{$(".logo-backs2").remove(),$("#pnlControls .slider-toolbar").remove(),$("#magazineViewport").html(""),$("#magazineViewport").append($("#tplMagazine").html()),$("#magazineViewport").css("width","auto"),$("#magazineViewport").css("height","auto"),$("#canvas").removeClass("canvas-center"),$("#canvas").fadeIn(1e3);var i=$(".magazine"),n=hzflip.viewers.magazine;n.config=e,n.design=t,null!=t&&("book"==t.type?$(".magazine-viewport").addClass("magazine-book"):"album"==t.type?$(".magazine-viewport").addClass("magazine-album"):"notebook"==t.type&&$(".magazine-viewport").addClass("magazine-book").addClass("round-pages"),"1"==t.rtl?$(".magazine").attr("dir","rtl"):$(".magazine").removeAttr("dir"),1==t.show_double?($(".magazine-viewport").removeClass("page-single"),$(".magazine-viewport").addClass("page-double")):2==n.design.show_double?($(".magazine-viewport").removeClass("page-double"),$(".magazine-viewport").addClass("page-single")):($(".magazine-viewport").removeClass("page-single"),$(".magazine-viewport").removeClass("page-double"))),0!=i.width()&&0!=i.height()?(i.turn({width:e.width*e.isize*2,height:e.height*e.isize,duration:n.duration,gradients:e.num_pages>1,autoCenter:!0,elevation:200,pages:e.num_pages,display:2==n.design.show_double?"single":"double",when:{start:function(e){n.isEditMode||n.isZoomedIn?e.preventDefault():heyzine.turning()},end:function(e,t,i){heyzine.turned(t.page,"end")},turning:function(e,t,i){heyzine.turning(t),n.adjustPageDepth(t),$(".page.hard").closest(".page-wrapper").addClass("hard-page-wrapper")},turned:function(t,i,o){$(this).turn("center"),$(".page.hard").closest(".page-wrapper").addClass("hard-page-wrapper"),heyzine.helpers.loading.startEffect(),heyzine.turned(i);for(let t=4;t<8;t++)i+t<=e.num_pages&&!n.isPageLoaded(i+t)&&(n.addPage(i+t,$(this)),n.loadedPages.push(i+t))},missing:function(e,t){for(var i=0;i<t.length;i++)n.addPage(t[i],$(this)),n.loadedPages.push(t[i])}}}),e.num_pages<=1&&$("#magazineViewport .shadow").remove(),n.adjustPageDepth(1),$(".magazine").addClass("animated"),n.resizeViewport()):setTimeout(hzflip.viewers.magazine.render,10)},goToPage:e=>{$(".magazine").turn("is")&&(isNaN(parseInt(e))?$(".magazine").turn(e):$(".magazine").turn("page",e))},setZoom:(e,t)=>{var i=hzflip.viewers.magazine;i.isZoomedIn="zoomIn"==e},destroy:()=>{$("#magazineViewport").html("")},isPageLoaded:function(e){for(var t=0;t<this.loadedPages.length;t++)if(e==this.loadedPages[t])return!0;return!1},addPage:(e,t)=>{const i=hzflip.viewers.magazine,n=i.config,o=i.design;let s=$("<div />",{});s.addClass("page-cont"),e==n.num_pages?s.addClass("page-last"):e==n.num_pages-1&&s.addClass("page-second-last"),null!=n&&null!=o&&null!=o.type&&("book"==o.type||"notebook"==o.type?(1==e||2==e||e==n.num_pages||n.num_pages%2==0&&e==n.num_pages-1)&&s.addClass("hard"):"album"==o.type&&s.addClass("hard")),t.turn("addPage",s,e)&&(1==e&&null!=n.thumbnail&&""!=$.trim(n.thumbnail)?heyzine.helpers.loading.show("crisp",s,e):heyzine.helpers.loading.show("blur",s,e),heyzine.loadPageView(e,s,"normal").then(()=>{heyzine.loadPageLayers(e,s,"normal")}).catch(()=>{}))},setEditMode:function(e){this.isEditMode=e},getCurrentPage:function(){return $(".magazine").turn("page")},getVisiblePages:function(){var e=hzflip.viewers.magazine;const t=$(".magazine").turn("page");var i=$("#canvas").width(),n=$("#canvas").height();return i<750&&i<=n&&0==e.design.show_double||2==e.design.show_double?[t]:1==t?[1]:this.isLastPage(t)?e.config.num_pages%2==0?[e.config.num_pages]:[e.config.num_pages-1,e.config.num_pages]:t%2==0?[t,t+1]:t%2!=0?[t-1,t]:void 0},getVisiblePagesElements:function(){const e=this.getVisiblePages(),t=[];for(let i=0;i<e.length;i++)t.push($('#magazineViewport [page="'+e[i]+'"]'));return t},isLastPage:e=>{var t=hzflip.viewers.magazine,i=null==e?$(".magazine").turn("page"):e,n=$("#canvas").width(),o=$("#canvas").height();return n<750&&n<=o&&0==t.design.show_double||2==t.design.show_double?t.config.num_pages==i:t.config.num_pages%2!=0&&(i==t.config.num_pages||i==t.config.num_pages-1)||t.config.num_pages%2==0&&i==t.config.num_pages},adjustPageDepth:function(e){if(null==this.design.show_edges||0==this.design.show_edges)return;let t=3;if(null!=this.design.show_round&&1==this.design.show_round?($(".magazine-viewport .page-depth > img").each((function(){$(this).attr("src",$(this).attr("src").replace("pages-depth.svg","pages-depth-rounded.svg"))})),t=4.2857):($(".magazine-viewport .page-depth > img").each((function(){$(this).attr("src",$(this).attr("src").replace("pages-depth-rounded.svg","pages-depth.svg"))})),t=3),this.config.num_pages<4)return;this.config.num_pages<8&&(t=5);let i=$(".page-depth-left").width()/t,n=this.config.num_pages-1,o=i-i/n*(e-1),s=i-i/n*(this.config.num_pages-e),a=$(".magazine").turn("display"),l=e=>{$(".page-depth-right").css("right","0px"),setTimeout(()=>{$(".page-depth-right").hide()},null==e?100:e)},r=(e,t)=>{let i=0;i=1==this.design.rtl?this.prevPage>t?100:this.duration-200:this.prevPage>t?this.duration-200:100,setTimeout(()=>{$(".page-depth-right").show(),setTimeout(()=>{$(".page-depth-right").css("right","-"+e+"px")},10)},i)},h=e=>{$(".page-depth-left").css("left","0px"),setTimeout(()=>{$(".page-depth-left").hide()},null==e?100:e)},d=(e,t)=>{let i=0;i=1==this.design.rtl?this.prevPage<t?100:this.duration-200:this.prevPage<t?this.duration-200:100,setTimeout(()=>{$(".page-depth-left").show(),setTimeout(()=>{$(".page-depth-left").css("left","-"+e+"px")},10)},i)};e==this.config.num_pages?1==this.design.rtl?h(0):l(0):1==e&&(1==this.design.rtl?l(0):h(0)),o<1||e==this.config.num_pages||e==this.config.num_pages-1||"double"==a&&e==this.config.num_pages-2?1==this.design.rtl?h():l():1==this.design.rtl?d(o,e):r(o,e),s<1||1==e||2==e||"double"==a&&3==e?1==this.design.rtl?l():h():1==this.design.rtl?r(s,e):d(s,e),this.prevPage=e},resizeViewport:()=>{var e=hzflip.viewers.magazine,t=$("#canvas").width(),i=$("#canvas").height(),n=$(".magazine").turn("options");if($(".magazine").removeClass("animated"),$(".magazine-viewport").css({width:t,height:i}),null!=n){var o=!1,s=n.width;0==e.design.show_double?t<750&&t<=i?(s=n.width/2,o=!0,"double"==$(".magazine").turn("display")&&($(".magazine").turn("display","single"),heyzine.setPageDisplay("single"))):(s=n.width,o=!1,"single"==$(".magazine").turn("display")&&($(".magazine").turn("display","double"),heyzine.setPageDisplay("double"))):1==e.design.show_double?(s=n.width,o=!1,"single"==$(".magazine").turn("display")&&($(".magazine").turn("display","double"),heyzine.setPageDisplay("double"))):2==e.design.show_double&&(s=n.width/2,o=!0,"double"==$(".magazine").turn("display")&&($(".magazine").turn("display","single"),heyzine.setPageDisplay("single"))),o?($(".magazine-viewport").addClass("page-single"),$(".magazine-viewport").removeClass("page-double")):($(".magazine-viewport").removeClass("page-single"),$(".magazine-viewport").addClass("page-double"));var a=e.calculateBound({width:s,height:n.height,boundWidth:Math.min(s,t),boundHeight:Math.min(n.height,i)});a.width%2!=0&&a.width--,null!=heyzine.renderAspectRatio&&(a.height=o?Math.trunc(a.width*heyzine.renderAspectRatio):Math.trunc(a.width/2*heyzine.renderAspectRatio)),a.width==$(".magazine").width()&&a.height==$(".magazine").height()||($(".magazine").turn("size",a.width,a.height),hzflip.controls.resizeViewport(a)),$(".magazine").css({top:-a.height/2,left:-a.width/2}),$(".magazine").addClass("animated"),$(document).trigger("heyzineResizeViewport",[])}},calculateBound:e=>{var t={width:e.width,height:e.height};if(t.width>e.boundWidth||t.height>e.boundHeight){var i=t.width/t.height;e.boundWidth/i>e.boundHeight&&e.boundHeight*i<=e.boundWidth?(t.width=Math.round(e.boundHeight*i),t.height=e.boundHeight):(t.width=e.boundWidth,t.height=Math.round(e.boundWidth/i))}return t}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.viewers&&(hzflip.viewers={}),hzflip.viewers.swiper={slides:[],config:{},design:{},swiper:{},isEditMode:!1,enabledEvents:!0,render:(e,t)=>{$("#pnlControls .slider-toolbar").remove(),$(".logo-backs2").remove(),$("#magazineViewport").html(""),$("#magazineViewport").append($("#tplSwiper").html()),$("#canvas").addClass("canvas-center"),$("#canvas").fadeIn(1e3),$(".logo-backs2").length>0&&($(".logo-backs2").parent().is("a")?$(".logo-backs2").parent().appendTo("#canvas"):$(".logo-backs2").appendTo("#canvas"));var i=hzflip.viewers.swiper;i.config=e,i.design=t,null!=t&&("1"==t.rtl?$("#magazineViewport .container").attr("dir","rtl"):$("#magazineViewport .container").removeAttr("dir")),i.slides=[];for(let t=0;t<e.num_pages;t++)i.slides.push(t);i.resizeViewport();const n="fade"==t.type?null:t.type,o=1==t.viewer_dir?"vertical":"horizontal";i.swiper=new Swiper("#magazineViewport .container",{direction:o,observeParents:!0,effect:n,speed:i.isEditMode?0:300,preventClicks:!1,preventClicksPropagation:!1,shortSwipes:!1,coverflowEffect:{rotate:30,slideShadows:!1},flipEffect:{rotate:30,slideShadows:!0},loop:!1,navigation:{nextEl:".btnNext",prevEl:".btnPrevious"},virtual:{slides:i.slides,addSlidesBefore:2,addSlidesAfter:2,renderExternal:function(e){const n=$("#magazineViewport").find(".swiper-wrapper");n.find(".swiper-slide").each((function(){var t=$(this).attr("data-slidei");(t<e.from||t>e.to)&&$(this).remove()}));const s=n.find(".swiper-slide").first(),a=n.find(".swiper-slide").last(),l=s.length>0?s.attr("data-slidei"):0,r=a.length>0?a.attr("data-slidei"):0;for(let t=0;t<e.slides.length;t++){const o=e.slides[t];if(n.find('[data-slidei="'+o+'"]').length<=0&&o>=r){const e=$('<div class="swiper-slide page-wrapper" data-slidei="'+o+'" page="'+(o+1)+'"><div class="swiper-zoom-container page-cont p'+(o+1)+'"></div></div>');e.appendTo(n),o+1==1?heyzine.helpers.loading.show("crisp",e.find(".swiper-zoom-container"),o+1):heyzine.helpers.loading.show("blur",e.find(".swiper-zoom-container"),o+1),heyzine.loadPageView(o+1,e.find(".swiper-zoom-container"),"normal").then(()=>{$(".swiper-slide").children().addClass("inactive"),$('.swiper-slide[data-slidei="'+i.slides[i.swiper.realIndex]+'"]').children().removeClass("inactive"),$(".swiper-slide").removeClass("swiper-slide-active"),$('.swiper-slide[data-slidei="'+i.slides[i.swiper.realIndex]+'"]').addClass("swiper-slide-active"),heyzine.loadPageLayers(o+1,e.find(".swiper-zoom-container"),"normal")}).catch(()=>{})}}for(let t=e.slides.length-1;t>=0;t--){const o=e.slides[t];if(n.find('[data-slidei="'+o+'"]').length<=0&&o<l){const e=$('<div class="swiper-slide page-wrapper" data-slidei="'+o+'" page="'+(o+1)+'"><div class="swiper-zoom-container page-cont p'+(o+1)+'"></div></div>');e.prependTo(n),o+1==1?heyzine.helpers.loading.show("crisp",e.find(".swiper-zoom-container"),o+1):heyzine.helpers.loading.show("blur",e.find(".swiper-zoom-container"),o+1),heyzine.loadPageView(o+1,e.find(".swiper-zoom-container"),"normal").then(()=>{$(".swiper-slide").children().addClass("inactive"),$('.swiper-slide[data-slidei="'+i.slides[i.swiper.realIndex]+'"]').children().removeClass("inactive"),$(".swiper-slide").removeClass("swiper-slide-active"),$('.swiper-slide[data-slidei="'+i.slides[i.swiper.realIndex]+'"]').addClass("swiper-slide-active"),heyzine.loadPageLayers(o+1,e.find(".swiper-zoom-container"),"normal")}).catch(()=>{})}}let h=1==t.rtl?-e.offset:e.offset;"vertical"==o?$(".swiper-slide").css("top",Math.abs(h)):$(".swiper-slide").css("left",h)}},on:{slideChange:function(){var e=i.slides[i.swiper.realIndex];$(".swiper-slide").children().addClass("inactive"),$('.swiper-slide[data-slidei="'+e+'"]').children().removeClass("inactive"),heyzine.turning(i.slides[i.swiper.realIndex]+1),setTimeout(()=>{$('.swiper-slide[data-slidei="'+e+'"]').addClass("swiper-slide-active"),heyzine.turned(e+1),heyzine.helpers.loading.startEffect()},350)},transitionStart:function(){var e=i.slides[i.swiper.realIndex];$('.swiper-slide[data-slidei="'+e+'"]').addClass("swiper-slide-active"),1==i.config.num_pages&&setTimeout(()=>{$(".swiper-slide").addClass("swiper-slide-active")},400)},transitionEnd:function(){var e=i.slides[i.swiper.realIndex];$('.swiper-slide[data-slidei="'+e+'"]').addClass("swiper-slide-active")},touchStart:function(e){$(e.target).closest(".layer-action-render").hasClass("layer-disable-page-drag")&&(this.allowTouchMove=!1)},touchEnd:function(){this.allowTouchMove=!0},zoomChange:function(e,t,i){}}}),$("#canvas").on("mousedown",".swiper-zoom-container > img",(function(e){return e.preventDefault(),!0}))},goToPage:(e,t)=>{var i=hzflip.viewers.swiper;"string"!=typeof e||"next"!=e||"keyboard"!=t&&"button-nav"!=t?"string"!=typeof e||"previous"!=e||"keyboard"!=t&&"button-nav"!=t?isNaN(parseInt(e))||(i.isEditMode?i.swiper.slideTo(parseInt(e)-1,0):i.swiper.slideTo(parseInt(e)-1)):i.isEditMode?i.swiper.slidePrev(0):i.swiper.slidePrev():i.isEditMode?i.swiper.slideNext(0):i.swiper.slideNext()},setZoom:function(e,t){null==e?this.enabledEvents||(heyzine.viewer.swiper.attachEvents(),this.enabledEvents=!0):"string"==typeof e&&("zoomIn"==e?this.enabledEvents&&(heyzine.viewer.swiper.detachEvents(),this.enabledEvents=!1):"zoomOut"==e&&(this.enabledEvents||(heyzine.viewer.swiper.attachEvents(),this.enabledEvents=!0)))},destroy:()=>{$("#magazineViewport").html(""),$("#magazineViewport").css("padding","0")},resizeViewport:function(){var e=hzflip.viewers.swiper;const t=scaler.getObjectFitSize(!0,$("#canvas").width(),$("#canvas").height(),this.config.width,this.config.height);$("#magazineViewport").attr("style","width:"+Math.ceil(t.width)+"px !important; height: "+Math.ceil(t.height)+"px !important;"),null!=e.swiper&&e.swiper.update&&e.swiper.update()},getCurrentPage:()=>{var e=hzflip.viewers.swiper;return e.slides[e.swiper.realIndex]+1},getVisiblePages:function(){var e=hzflip.viewers.swiper;const t=e.slides[e.swiper.realIndex]+1,i=[];return i.push(t),i},getVisiblePagesElements:function(){const e=this.getVisiblePages(),t=[];for(let i=0;i<e.length;i++)t.push($('#magazineViewport [page="'+e[i]+'"]'));return t},isLastPage:e=>{var t=hzflip.viewers.swiper;return null==e?t.slides[t.swiper.realIndex]+1==t.config.num_pages:e==t.config.num_pages},setEditMode:function(e){this.isEditMode=e,this.isEditMode?heyzine.viewer.swiper.params.speed=0:heyzine.viewer.swiper.params.speed=300},adjustPageDepth:function(e){}},"undefined"==typeof hzp&&(hzp={}),hzp={val:!1,hash:function(e,t){return crypto.subtle.digest(e,new TextEncoder("utf-8").encode(t)).then(e=>Array.prototype.map.call(new Uint8Array(e),e=>("00"+e.toString(16)).slice(-2)).join(""))},validate:function(e,t,i,n,o){return new Promise((s,a)=>{var l=e+"-"+t+"-"+i+"-"+n;this.hash("SHA-256",l).then(e=>{s(o==e.substr(0,41))})})},check:function(e,t,i,n,o){this.validate(e,t,i,n,o).then(e=>{if(e)hzp.val=!0;else{console.log("sc");document.location.href="/"}})}},"undefined"==typeof hzflip&&(hzflip={}),hzflip.stats={iframes:{isOver:!1,el:null},sessionTracks:[],track:function(e,t,i,n){if("undefined"==typeof plausible)return void(null!=n&&n());let o=null;null!=n&&(o=setTimeout(()=>{n()},1e3));let s=e+t+i,a=Math.round((new Date).getTime()/1e3);if(this.sessionTracks[s]&&a-this.sessionTracks[s]<30)return null!=n&&n(),void(null!=o&&clearTimeout(o));this.sessionTracks[s]=a,plausible(heyzine.config.name,{props:{type:e,target:t,page:i,token:heyzine.config.readerToken},callback:()=>{null!=n&&n(),null!=o&&clearTimeout(o)}})},trackLayer:function(e,t,i){let n=null;null!=t.action.target?n=t.action.target:null!=t.media&&null!=t.media.url&&(n=t.media.url),this.track(e,n,t.page,i)},trackControls:function(e){this.track(e,null,null,null)},trackIframes:function(e){let t=this;$(".layer-action-render iframe").off("mouseenter").on("mouseenter",(function(){t.iframes.isOver=!0,t.iframes.el=$(this)})),$(".layer-action-render iframe").off("mouseleave").on("mouseleave",(function(){t.iframes.isOver=!1})),$(window).off("blur").on("blur",()=>{if(this.iframes.isOver&&this.iframes.el){let t=this.iframes.el.closest(".layer-action-render").attr("id");if(null!=t){t=t.replace("layer","");for(let i=0;i<e.length;i++)e[i].id==t&&this.trackLayer(e[i].type,e[i])}}})},trackMedia:function(e,t,i){for(let i=0;i<t.length;i++)null!=t[i]&&"backAudio"!=t[i].compType&&($(t[i]).off("play").on("play",()=>{this.trackLayer(e[i].type,e[i])}),$(t[i]).off("player:play").on("player:play",()=>{this.trackLayer(e[i].type,e[i])}));for(let t=0;t<i.length;t++)e[t]&&"video"==e[t].type&&e[t].media&&"youtube"!=e[t].media.type&&$(i[t]).find("video").off("play").on("play",()=>{this.trackLayer(e[t].type,e[t])})}},heyzineDesign={data:{},afterLoad:function(e,t){heyzineDesign.data=e,null==t&&($(".logo-backs2-loading").remove(),this.setLogo(e)),this.setNextPrevious(e),this.setSlider(e),this.setIconset(e),this.setDisposition(e),this.setPageEffect(e),$(".logo-backs2").parent().is("a")&&($(".logo-backs2").css("z-index",1),null==heyzine||null==heyzine.config||1==heyzine.getCurrentPage()||heyzine.getCurrentPage()==heyzine.config.num_pages&&heyzine.config.num_pages%2==0||$(".logo-backs2").css("z-index",0))},load:function(e){heyzineDesign.data=e,heyzine.lang.translate.init();let t=this.setVisibleControls(e);$("#pnlControls").show(),t?$("#pnlControls").hide():$("#pnlControls").show(),this.setBackground(e),this.setTitle(e),this.setPageEffect(e),this.setIconset(e),this.setDisposition(e),this.setLogo(e),this.setTooltips(),(document.location.href.indexOf("?ctl=0")>0||document.location.href.indexOf("&ctl=0")>0)&&$("#pnlControls").hide(),heyzineDesign.afterLoad(e,!0)},setTitle:function(e){$(".flipbook-title").hide(),$(".flipbook-title p").html(""),$(".flipbook-title h2").html(""),$(".flipbook-title h1").html(""),null!=e.show_text&&1==e.show_text&&null!=e.title&&""!=$.trim(e.title)&&($(".flipbook-title h1").html(sanitizer.sanitize(e.title.replace(/(?:\r\n|\r|\n)/g,"<br>"))),$(".flipbook-title").show()),null!=e.show_text&&1==e.show_text&&null!=e.subtitle&&""!=$.trim(e.subtitle)&&($(".flipbook-title h2").html(sanitizer.sanitize(e.subtitle.replace(/(?:\r\n|\r|\n)/g,"<br>"))),$(".flipbook-title").show()),null!=e.show_text&&1==e.show_text&&null!=e.description&&""!=$.trim(e.description)&&($(".flipbook-title p").html(sanitizer.sanitize(e.description.replace(/(?:\r\n|\r|\n)/g,"<br>"))),$(".flipbook-title").show())},setBackground:function(e){if(null!=e.background&&""!=$.trim(e.background)&&("none"==e.background?$(".logo-backs").css("background-image","none"):$(".logo-backs").css("background-image","url('"+e.background+"')")),null!=e.background_color&&""!=$.trim(e.background_color)&&$(".logo-backs").parent().css("background-color",e.background_color),null!=e.background_style&&""!=$.trim(e.background_style)){const t=e.background_style;null!=t.size&&$(".logo-backs").css("background-size",t.size),null!=t.size&&$(".logo-backs").css("background-position",t.position),null!=t.transparency&&$(".logo-backs").css("opacity",1-t.transparency/100),null!=t.blur&&$(".logo-backs").css("filter","blur("+t.blur+"px)")}},setLogo:function(e){null!=e.company_logo&&""!=$.trim(e.company_logo)?($(".logo-backs2").attr("src",e.company_logo),$(".logo-backs2").show()):($(".logo-backs2").attr("src",""),$(".logo-backs2").hide()),$(".logo-backs2").length>0&&$(".logo-backs2").parent().is("a")&&$(".logo-backs2").unwrap(),null!=e.company_logo&&""!=$.trim(e.company_logo)&&null!=e.company_logo_link&&""!=$.trim(e.company_logo_link)&&(1==e.company_logo_link_mode?$(".logo-backs2").wrap('<a rel="nofollow,noindex" target="_BLANK">'):2==e.company_logo_link_mode?$(".logo-backs2").wrap('<a rel="nofollow,noindex" target="_TOP">'):$(".logo-backs2").wrap('<a rel="nofollow,noindex">'),$(".logo-backs2").parent().attr("href",e.company_logo_link))},setNextPrevious:function(e){null!=e.arrows&&($(".next-button").css("background-image",""),$(".previous-button").css("background-image",""),$(".next-button").css("display",""),$(".previous-button").css("display",""),$(".next-button").removeClass("corner-right"),$(".previous-button").removeClass("corner-left"),$(".next-button").removeClass("next-show"),$(".previous-button").removeClass("previous-show"),$(".swiper-button-next").show(),$(".swiper-button-prev").show(),1==e.arrows?($(".next-button").addClass("corner-right"),$(".previous-button").addClass("corner-left"),$(".next-button").addClass("next-show"),$(".previous-button").addClass("previous-show"),(document.location.href.indexOf("#page/1")>0||document.location.href.indexOf("#page")<0)&&(1==e.rtl?$(".next-button").css("display","none"):$(".previous-button").css("display","none"))):0==e.arrows||(2==e.arrows?($(".next-button").addClass("next-show"),$(".previous-button").addClass("previous-show"),(document.location.href.indexOf("#page/1")>0||document.location.href.indexOf("#page")<0)&&(1==e.rtl?$(".next-button").css("display","none"):$(".previous-button").css("display","none"))):($(".next-button").css("display","none"),$(".previous-button").css("display","none"),$(".swiper-button-next").hide(),$(".swiper-button-prev").hide())))},setSlider:function(e){null==e.show_slider||0!=$.trim(e.show_slider)&&!1!==e.show_slider?$(".control-bottom .page-bar").show():$(".control-bottom .page-bar").hide()},setIconset:function(e){let t=ICONSET_VER,i=ICONSET_VER,n="iconset2_"+i,o=e.controls_iconset;if($(".next-button").addClass("hz-iconset-2"),$(".previous-button").addClass("hz-iconset-2"),$("#pnlControls").addClass("hz-iconset-2"),$("#pnlZoomStep").addClass("hz-iconset-2"),null!=e.controls_iconset){const n=e.controls_iconset.split("_");i=parseInt(n[n.length-1]),i<5&&($(".next-button").removeClass("hz-iconset-2"),$(".previous-button").removeClass("hz-iconset-2"),$("#pnlControls").removeClass("hz-iconset-2"),$("#pnlZoomStep").removeClass("hz-iconset-2")),-1===e.controls_iconset.indexOf("iconsetu")&&(o=e.controls_iconset.replace("_"+i,"_"+t))}1==e.arrows&&(null!=e.controls_iconset?($(".next-button").css("background-image","url('flipbook/img/"+o+".png')"),$(".previous-button").css("background-image","url('flipbook/img/"+o+".png')")):($(".next-button").css("background-image","url('flipbook/img/"+n+".png')"),$(".previous-button").css("background-image","url('flipbook/img/"+n+".png')"))),null!=e.controls_iconset?($(".hz-icon").css("background-image","url('flipbook/img/"+o+".png')"),$(".hz-icon-2").css("background-image","url('flipbook/img/"+o+".png')"),$("[data-iconset]").hide(),$("[data-iconset="+e.controls_iconset.split("_")[0]+"]").length>0?$("[data-iconset="+e.controls_iconset.split("_")[0]+"]").show():$("[data-iconset=iconset5]").show()):($(".hz-icon").css("background-image","url('flipbook/img/"+n+".png')"),$(".hz-icon-2").css("background-image","url('flipbook/img/"+n+".png')"),$("[data-iconset]").hide(),$("[data-iconset=iconset5]").show())},setVisibleControls:function(e){let t=!0;return null==e.show_zoom||0!=$.trim(e.show_zoom)&&!1!==e.show_zoom?($("#pnlControls .zoom-icon").show(),t=!1):$("#pnlControls .zoom-icon").hide(),null==e.show_share||0==$.trim(e.show_share)||!1===e.show_share?$("#btnShare").hide():($("#btnShare").show(),t=!1),null==e.show_search||0==$.trim(e.show_search)||!1===e.show_search?$("#btnSearch").hide():($("#btnSearch").show(),t=!1),null==e.show_prevnext||1!=$.trim(e.show_prevnext)&&!0!==e.show_prevnext?($("#btnNavPrev").hide(),$("#btnNavNext").hide()):($("#btnNavPrev").show(),$("#btnNavNext").show(),1==e.viewer_dir?($("#btnNavPrev").addClass("button-prev-vertical"),$("#btnNavNext").addClass("button-next-vertical")):($("#btnNavPrev").removeClass("button-prev-vertical"),$("#btnNavNext").removeClass("button-next-vertical")),t=!1),null==e.show_start||1!=$.trim(e.show_start)&&!0!==e.show_start?$("#btnNavStart").hide():($("#btnNavStart").show(),1==e.viewer_dir?$("#btnNavStart").addClass("button-start-vertical"):$("#btnNavStart").removeClass("button-start-vertical"),t=!1),null==e.show_end||1!=$.trim(e.show_end)&&!0!==e.show_end?$("#btnNavEnd").hide():($("#btnNavEnd").show(),1==e.viewer_dir?$("#btnNavEnd").addClass("button-end-vertical"):$("#btnNavEnd").removeClass("button-end-vertical"),t=!1),null==e.sound_flip||1!=$.trim(e.sound_flip)&&!0!==e.sound_flip?$("#btnSoundOff").hide():($("#btnSoundOff").show(),t=!1),null==e.show_download||0!=$.trim(e.show_download)&&!1!==e.show_download?($(".down-pdf").show(),t=!1):$(".down-pdf").hide(),null==e.show_print||0==$.trim(e.show_print)||!1===e.show_print||$.isTouch?$("#btnPrint").hide():($("#btnPrint").show(),t=!1),null==e.show_fullscreen||0==$.trim(e.show_fullscreen)||!1===e.show_fullscreen?$("#btnFullscreen").hide():($("#btnFullscreen").show(),t=!1),t},setPageEffect:function(e){null!=e.show_depth&&("0"==e.show_depth?$("#magazineViewport").addClass("no-depth"):$("#magazineViewport").removeClass("no-depth")),null!=e.show_shadow&&("0"==e.show_shadow?$("#magazineViewport").addClass("no-shadow"):$("#magazineViewport").removeClass("no-shadow")),null!=e.show_round&&("1"==e.show_round?($("#magazineViewport").addClass("round-pages"),$("#magazineViewport .page-depth > img").each((function(){null!=$(this).attr("src")&&$(this).attr("src",$(this).attr("src").replace("pages-depth.svg","pages-depth-rounded.svg"))}))):($("#magazineViewport").removeClass("round-pages"),$("#magazineViewport .page-depth > img").each((function(){null!=$(this).attr("src")&&$(this).attr("src",$(this).attr("src").replace("pages-depth-rounded.svg","pages-depth.svg"))})))),null!=e.show_binding&&("1"==e.show_binding?$("#magazineViewport").addClass("binding-pages"):$("#magazineViewport").removeClass("binding-pages")),null!=e.show_center&&("0"==e.show_center?$("#magazineViewport").addClass("no-center"):$("#magazineViewport").removeClass("no-center"))},setDisposition:function(e){$(".controls-pdf").removeClass("controls-sm"),$(".controls-pdf").removeClass("controls-md"),$(".controls-pdf").removeClass("controls-lg"),""==$.trim(e.controls_size)||"sm"!=e.controls_size&&"lg"!=e.controls_size?$(".controls-pdf").addClass("controls-md"):$(".controls-pdf").addClass("controls-"+e.controls_size),""==$.trim(e.controls_size)||"sm"!=e.controls_size&&"lg"!=e.controls_size?$(".controls-pdf").addClass("controls-md"):$(".controls-pdf").addClass("controls-"+e.controls_size),null!=e.controls_style&&heyzine.controls.toolbar.setDisposition(e),$(".logo-backs2").attr("style",""),""!=$.trim(e.company_logo_style)&&0!=e.company_logo_style&&$(".logo-backs2").css(JSON.parse(e.company_logo_style)),null!=e.company_logo&&""!=$.trim(e.company_logo)?$(".logo-backs2").show():$(".logo-backs2").hide().css({width:"0px",height:"0px"})},setTooltips:function(){$("#pnlControls #btnNavStart").attr("aria-label",heyzine.lang.translate.fromKey("first")),$("#pnlControls #btnNavPrev").attr("aria-label",heyzine.lang.translate.fromKey("prev")),$("#pnlControls #btnNavNext").attr("aria-label",heyzine.lang.translate.fromKey("next")),$("#pnlControls #btnNavEnd").attr("aria-label",heyzine.lang.translate.fromKey("last")),$("#pnlControls #btnShare").attr("aria-label",heyzine.lang.translate.fromKey("share")),$("#pnlControls .down-pdf").attr("aria-label",heyzine.lang.translate.fromKey("download")),$("#pnlControls #btnPrint").attr("aria-label",heyzine.lang.translate.fromKey("print")),$("#pnlControls .zoom-icon").attr("aria-label",heyzine.lang.translate.fromKey("zoom")),$("#pnlControls #btnFullscreen").attr("aria-label",heyzine.lang.translate.fromKey("fullscreen")),$("#pnlControls #btnSoundOff").attr("aria-label",heyzine.lang.translate.fromKey("sound")),$("#pnlControls #btnSearch").attr("aria-label",heyzine.lang.translate.fromKey("search")),$("#pnlZoomStep .btnZoomMore").attr("aria-label",heyzine.lang.translate.fromKey("zoomin")),$("#pnlZoomStep .btnZoomLess").attr("aria-label",heyzine.lang.translate.fromKey("zoomout")),$("[aria-label]").on("click",(function(){$(this).addClass("no-tooltip")})),$("[aria-label]").on("mouseenter",(function(){$(this).removeClass("no-tooltip")})),$("[aria-label]").on("mouseleave",(function(){$(this).removeClass("no-tooltip")}))}},resetHeyzine=null,heyzine={config:null,design:heyzineDesign,controls:hzflip.controls,layers:hzflip.layers,helpers:hzflip.helpers,stats:hzflip.stats,viewer:null,largeWidth:2214,url:null,renderAspectRatio:null,viewportScales:[],inited:!1,firstInteractionState:!1,thumbnailPath:THUMBNAIL_PATH,thumbnail:new Image,tocPath:TOC_PATH,toc:new Image,autoPlay:null,browserNavButtons:null,timerRes:!1,progressState:{started:!1,progress:0,numIndicators:0,ended:0},destroy:()=>{heyzine.controls.destroy(),heyzine=$.extend(!0,{},resetHeyzine)},reload:function(e){try{sessionStorage.clear()}catch(e){console.log("sessionStorage not available")}return new Promise((t,i)=>{heyzine.render(),null!=e?(heyzine.controls.initViewerControls(e),heyzine.layers.init(e)):heyzine.controls.initViewerControls(heyzine.config),t()})},setViewer:(e,t)=>(heyzine.viewer.destroy(),heyzine.design.data.type=t,heyzine.config.type=t,heyzine.config.viewer=e,heyzine.viewer="SWIPER"==e?hzflip.viewers.swiper:hzflip.viewers.magazine,"magazine"==t||"album"==t?(heyzine.design.data.show_edges=1,heyzine.design.data.show_round=0,heyzine.design.data.show_depth=1,heyzine.design.data.show_binding=0):"book"==t?(heyzine.design.data.show_edges=1,heyzine.design.data.show_round=0,heyzine.design.data.show_depth=1,heyzine.design.data.show_binding=1):"notebook"==t?(heyzine.design.data.show_edges=1,heyzine.design.data.show_round=1,heyzine.design.data.show_depth=1,heyzine.design.data.show_binding=0):"cards"==t?(heyzine.design.data.show_edges=0,heyzine.design.data.show_round=1,heyzine.design.data.show_depth=0,heyzine.design.data.show_binding=0):"fade"==t||"coverflow"==t?(heyzine.design.data.show_edges=0,heyzine.design.data.show_round=0,heyzine.design.data.show_depth=1,heyzine.design.data.show_binding=0):"flip"==t&&(heyzine.design.data.show_edges=0,heyzine.design.data.show_round=0,heyzine.design.data.show_depth=0,heyzine.design.data.show_binding=0),heyzine.design.data),load:(e,t)=>{try{sessionStorage.clear()}catch(e){console.log("sessionStorage not available")}if(heyzine.url=e,heyzine.config=t,heyzine.thumbnail.src=heyzine.thumbnailPath+t.thumbnail,heyzine.thumbnail.classList.add("loader-preview"),heyzine.thumbnail.alt="flipbook cover",document.location.href.indexOf("?dp=1")>0||document.location.href.indexOf("&dp=1")>0?heyzine.design.data.show_double=1:(document.location.href.indexOf("?dp=2")>0||document.location.href.indexOf("&dp=2")>0)&&(heyzine.design.data.show_double=2),null!=heyzine.parseUrl().ap&&(heyzine.autoPlay=heyzine.parseUrl().ap),null!=heyzine.parseUrl().bn&&(heyzine.browserNavButtons=heyzine.parseUrl().bn),null!=heyzine.parseUrl().hn&&0==heyzine.parseUrl().hn&&(t.hashNavigation=!1),0==heyzine.inited&&(heyzine.helpers.loading.showViewportLoader(),heyzine.inited=!0),"LOWT"==heyzine.config.mode&&scaler.isInIframe())return $(".magazine-viewport-loader .loader-preview-cont").append('<div class="lowt-overlay"></div>'),$(".magazine-viewport-loader .loader-preview-cont .loader").hide(),$(".lowt-overlay").on("click",(function(){$(".lowt-overlay").fadeOut("fast"),t.mode="PDF",heyzine.load(e,t)})),new Promise((e,t)=>{heyzine.resizeViewport(),e("")});if(null!=heyzine.design.data.embed_mode&&1==heyzine.design.data.embed_mode||(null==heyzine.toc&&(heyzine.toc=new Image),heyzine.toc.onerror=()=>{heyzine.toc=null},heyzine.toc.src=heyzine.tocPath+t.thumbnail.replace("-thumb.jpg","")+"-toc.jpg"),""!=$.trim(heyzine.design.data.load_page))try{const e=-1==heyzine.design.data.load_page?localStorage.getItem("lastpage-"+heyzine.config.name):heyzine.design.data.load_page;null!=e&&(window.location.hash="page/"+e)}catch(e){console.log("sessionStorage not available")}return new Promise((i,n)=>{null==resetHeyzine&&(resetHeyzine=$.extend(!0,{},heyzine)),"IMG"==heyzine.config.mode?$.extend(!0,heyzine,hzimg):"PREV"==heyzine.config.mode?$.extend(!0,heyzine,hzprev):$.extend(!0,heyzine,hzpdf),"SWIPER"==heyzine.config.viewer?heyzine.viewer=hzflip.viewers.swiper:heyzine.viewer=hzflip.viewers.magazine,heyzine.load(e,t).then(()=>{heyzine.layers.init(t),heyzine.render(),heyzine.controls.init(t),heyzine.refreshSession(),heyzine.design.afterLoad(heyzine.design.data),null!=heyzine.autoPlay&&heyzine.controls.navigation.startAutoPlay(heyzine.autoPlay),$(window).resize((function(){heyzine.resizeViewport(),heyzine.adjustResolution()})).bind("orientationchange",(function(){heyzine.resizeViewport(),heyzine.adjustResolution()})),$(document).on("click",()=>{heyzine.firstInteraction()}),heyzine.resizeViewport(),i("")})})},refreshSession:function(){heyzine.url.indexOf("/private/"+heyzine.config.name)>0&&setInterval(()=>{$.getJSON("/private/session/"+heyzine.config.name,(function(e){heyzine.pdf._transport._fullReader._stream.source.url=e.url,heyzine.url=e.url,$(".down-pdf").attr("href",e.download)}))},3e5)},adjustResolution:function(e){null==e&&(e=500),this.timerRes=!0,setTimeout(()=>{const e=heyzine.getVisiblePages();for(let t=0;t<e.length;t++){const i=e[t];let n=$("[page="+e[t]+"] .page-cont.p"+e[t]);heyzine.loadPageView(i,n,"normal").then(()=>{this.timerRes=!1}).catch(()=>{})}},e)},startAutoPlay:function(){},firstInteraction:function(){this.firstInteractionState||(console.log("first interaction"),heyzine.layers.firstInteraction(),this.firstInteractionState=!0)},setEditMode:function(e){heyzine.viewer.setEditMode(e),heyzine.controls.setEditMode(e),heyzine.layers.setEditMode(e)},setPageDisplay:function(e){heyzine.layers.setPageDisplay(e)},resizeViewport:function(){if($.isTouch){let e=window.innerHeight+"px";scaler.isSamsungBrowser()&&(e=window.innerHeight>window.innerWidth?"calc(100vh - 96px)":"calc(100vh - 48px)"),$("#canvas").prop("style").marginTop="1px",$("body").css("height",e),$(".logo-backs").css("height",e),setTimeout(()=>{$("#canvas").prop("style").marginTop="0"},500)}null!=heyzine.controls&&heyzine.controls.resizeViewport(),null!=heyzine.viewer&&heyzine.viewer.resizeViewport()},render:()=>{heyzine.viewer.render(heyzine.config,heyzine.design.data)},getCurrentPage:function(e){if(null==heyzine||null==heyzine.viewer){const e=Hash.fragment();return null!=e&&""!=$.trim(e.replace("page/",""))?parseInt(e.replace("page/","")):null}return heyzine.viewer.getCurrentPage()},isVisiblePage:function(e){const t=heyzine.viewer.getVisiblePages();if(null!=t&&t.length>0)for(let i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},getVisiblePages:function(){return heyzine.viewer.getVisiblePages()},getVisiblePagesElements:function(){return heyzine.viewer.getVisiblePagesElements()},getZoomScale:function(){return heyzine.controls.getZoomScale()},isLastPage:function(e){return heyzine.viewer.isLastPage(e)},showLoader:(e,t,i)=>{},turned:function(e,t){"end"!=t&&(heyzine.controls.turned(e),heyzine.layers.turned(e)),heyzine.adjustResolution(0);try{localStorage.setItem("lastpage-"+heyzine.config.name,e)}catch(e){console.log("sessionStorage not available")}$(document).trigger("heyzineTurned",[heyzine.config.name,e])},turning:e=>{heyzine.controls.turning(e),heyzine.layers.turning(e),$(document).trigger("heyzineTurning",[heyzine.config.name,e])},loadPageView:(e,t,i)=>{heyzine.loadPageView(e,t,i)},loadPageLayers:(e,t,i)=>{heyzine.layers.loadPageLayers(e,t,i)},loadPageThumbnails:(e,t,i)=>{heyzine.loadPageThumbnails(e,t,i)},goToPage:(e,t)=>{heyzine.viewer.goToPage(e,t)},setZoom:(e,t,i)=>{heyzine.controls.setZoom(e,t,i)},setPageCache:function(e,t,i,n){const o="hz_cache_"+Math.trunc(i)+"_p_"+e+"_"+t+"_"+heyzine.url;this.isSessionStorageEnabled()?sessionStorage.setItem(o,n):window.hstorage[o]=n},getPageCache:function(e,t,i){const n="hz_cache_"+Math.trunc(i)+"_p_"+e+"_"+t+"_"+heyzine.url;return this.isSessionStorageEnabled()?sessionStorage.getItem(n):window.hstorage[n]},isSessionStorageEnabled:function(){try{var e="__test__";return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(e){return null==window.hstorage&&(window.hstorage=[]),!1}},progressBar:function(e,t){if("start"==e||this.progressState.started){if("start"==e)$("#loaderLine").show(),this.progressState.started=!0,this.progressState.ended=0,this.progressState.progress=0,this.progressState.numIndicators=t.num;else if("progress"==e)this.progressState.progress+=t.inc/this.progressState.numIndicators;else{if("end"==e)return this.progressState.ended++,void(this.progressState.ended>=this.progressState.numIndicators&&(this.progressState.started=!1,$("#loaderLine").css("width",$(window).width()+"px"),setTimeout(()=>{$("#loaderLine").hide()},200)));"cancel"==e&&(this.progressState.started=!1,$("#loaderLine").hide())}$("#loaderLine").css("width",this.progressState.progress*$(window).width()/100+"px")}},parseUrl:function(e){var t,i,n,o,s={},a=e||window.location.href;if("string"==typeof a&&a.length)for(o=(i=(a=a.indexOf("?")>-1?a.replace(/\S*\?/,""):"").split("&").filter((function(e){return""!==e}))).length,t=0;t<o;t+=1)n=i[t].replace(/#\S+/g,"").split("="),s[decodeURIComponent(n[0])]=void 0===n[1]?void 0:decodeURIComponent(n[1])||"";return s},getBound:function(){let e=$("#canvas").width(),t=$("#canvas").height(),i=this.config.width,n=!1,o={width:i,height:this.config.height};"SWIPER"==this.config.viewer?(i=this.config.width,n=!0):0==this.design.data.show_double?e<750&&e<=t?(i=this.config.width,n=!0):(i*=2,n=!1):1==this.design.data.show_double?(i*=2,n=!1):2==this.design.data.show_double&&(i=this.config.width,n=!0),o.isSingle=n;let s={boundWidth:e,boundHeight:t},a=i/o.height;return a<=s.boundWidth/s.boundHeight?(o.width=Math.round(s.boundHeight*a),o.height=s.boundHeight,o.fit="height"):(o.width=s.boundWidth,o.height=Math.round(s.boundWidth/a),o.fit="width"),o},setZoomViewer:(e,t)=>heyzine.viewer.setZoom(e,t),coverPagesClass:(e,t)=>{const i=heyzine.config;var n=$(e).closest(".page");t-heyzine.design.data.cover==1?n.addClass("page-first"):t-heyzine.design.data.cover==i.num_pages&&n.addClass("page-last")}},null==heyzine.lang&&(heyzine.lang={}),null==heyzine.lang.text&&(heyzine.lang.text={}),heyzine.lang.text.ca={page:"Pàgina",search:"Cercar text",searching:"Cercant...",noresults:"No s´ha trobat resultats",first:"Primera pàgina",last:"Última pàgina",prev:"Pàgina anterior",next:"Pàgina següent",fullscreen:"Pantalla completa",sound:"So activat / desactivat",zoom:"Zoom",zoomin:"Ampliar zoom",zoomout:"Allunyar zoom",zoomreset:"Restablir zoom",download:"Descarregar",share:"Compartir",print:"Imprimir"},null==heyzine.lang&&(heyzine.lang={}),null==heyzine.lang.text&&(heyzine.lang.text={}),heyzine.lang.text.de={page:"Seite",search:"Text suchen",searching:"Auf der Suche nach...",noresults:"Keine Ergebnisse gefunden",first:"Titelseite",last:"Letzte Seite",prev:"Vorherige Seite",next:"Nächste Seite",fullscreen:"Vollbild",sound:"Ton ein / aus",zoom:"Zoom",zoomin:"Vergrößern",zoomout:"Herauszoomen",zoomreset:"Zoom zurücksetzen",download:"Herunterladen",share:"Teilen",print:"Drucken"},null==heyzine.lang&&(heyzine.lang={}),null==heyzine.lang.text&&(heyzine.lang.text={}),heyzine.lang.text.en={page:"Page",search:"Search text",searching:"Searching...",noresults:"No results found",first:"First page",last:"Last page",prev:"Previous page",next:"Next page",fullscreen:"Full screen",sound:"Sound off / on",zoom:"Zoom",zoomin:"Zoom in",zoomout:"Zoom out",zoomreset:"Zoom reset",download:"Download",share:"Share",print:"Print"},null==heyzine.lang&&(heyzine.lang={}),null==heyzine.lang.text&&(heyzine.lang.text={}),heyzine.lang.text.es={page:"Página",search:"Buscar texto",searching:"Buscando...",noresults:"No se ha encontrado resultados",first:"Primera página",last:"Última página",prev:"Página anterior",next:"Página siguiente",fullscreen:"Pantalla completa",sound:"Sonido activado / desactivado",zoom:"Zoom",zoomin:"Ampliar zoom",zoomout:"Alejar zoom",zoomreset:"Restablecer zoom",download:"Descargar",share:"Compartir",print:"Imprimir"},null==heyzine.lang&&(heyzine.lang={}),null==heyzine.lang.text&&(heyzine.lang.text={}),heyzine.lang.text.fr={page:"Page",search:"Recherche de texte",searching:"Cherche...",noresults:"Aucun résultat trouvé",first:"Première page",last:"Dernière page",prev:"Page précédente",next:"Page suivante",fullscreen:"Plein écran",sound:"Son activé / désactivé",zoom:"Zoom",zoomin:"Zoom avant",zoomout:"Zoom arrière",zoomreset:"Réinitialiser le zoom",download:"Télécharger",share:"Partager",print:"Imprimer"},null==heyzine.lang&&(heyzine.lang={}),null==heyzine.lang.text&&(heyzine.lang.text={}),heyzine.lang.text.pt={page:"Página",search:"Procurar texto",searching:"Procurando...",noresults:"Não foram encontrados resultados",first:"Primeira página",last:"Última página",prev:"Página anterior",next:"Página seguinte",fullscreen:"Ecrã inteiro",sound:"Som ligado / desligado",zoom:"Zoom",zoomin:"Ampliar",zoomout:"Diminuir",zoomreset:"Reiniciar zoom",download:"Descarregar",share:"Partilha",print:"Imprimir"},null==heyzine.lang&&(heyzine.lang={}),heyzine.lang.translate={lang:null,init:function(){let e=this.getLangCode();null!=e&&(-1!==e.indexOf("-")&&(e=e.split("-")[0]),-1!==e.indexOf("_")&&(e=e.split("_")[0])),this.lang=e},fromKey:function(e){let t="en";return null!=heyzine.lang.text[this.lang]&&(t=this.lang),null!=heyzine.lang.text[t][e]?heyzine.lang.text[t][e]:""},getLangCode:function(){var e,t,i=window.navigator,n=["language","browserLanguage","systemLanguage","userLanguage"];if(Array.isArray(i.languages))for(e=0;e<i.languages.length;e++)if((t=i.languages[e])&&t.length)return t;for(e=0;e<n.length;e++)if((t=i[n[e]])&&t.length)return t;return null}};